<!doctype html><html lang="ko"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="robots" content="noindex"><meta><title>태그: ScriptRunner - Pineoc&#039;s Blog</title><link rel="manifest" href="/blog/manifest.json"><meta name="application-name" content="Pineoc&#039;s Blog"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Pineoc&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="엔지니어 &amp;#x2F; 개발 PM &amp;#x2F; Tech에 관심많은 PM의 블로그"><meta property="og:type" content="blog"><meta property="og:title" content="Pineoc&#039;s Blog"><meta property="og:url" content="https://pineoc.github.io/blog"><meta property="og:site_name" content="Pineoc&#039;s Blog"><meta property="og:description" content="엔지니어 &amp;#x2F; 개발 PM &amp;#x2F; Tech에 관심많은 PM의 블로그"><meta property="og:locale" content="ko_KR"><meta property="og:image" content="https://pineoc.github.io/blog/img/og_image.png"><meta property="article:author" content="Pineoc"><meta property="article:tag" content="Developer, PM"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/blog/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://pineoc.github.io/blog"},"headline":"Pineoc's Blog","image":["https://pineoc.github.io/blog/img/og_image.png"],"author":{"@type":"Person","name":"Pineoc"},"publisher":{"@type":"Organization","name":"Pineoc's Blog","logo":{"@type":"ImageObject","url":"https://pineoc.github.io/img/logo.svg"}},"description":"엔지니어 &#x2F; 개발 PM &#x2F; Tech에 관심많은 PM의 블로그"}</script><link rel="icon" href="/blog/img/favicon.svg"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/blog/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-45439235-4" async></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-45439235-4")</script><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><script data-ad-client="ca-pub-8535740075617154" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><script>!function(){function e(){if(location.hash){Array.from(document.querySelectorAll(".tab-content")).forEach(e=>{e.classList.add("is-hidden")}),Array.from(document.querySelectorAll(".tabs li")).forEach(e=>{e.classList.remove("is-active")});const e=document.querySelector(location.hash),t=(e&&e.classList.remove("is-hidden"),document.querySelector(`a[href="${location.hash}"]`));t&&t.parentElement.classList.add("is-active")}}e(),window.addEventListener("hashchange",e,!1)}()</script><meta name="generator" content="Hexo 6.0.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/blog/"><img src="/blog/img/logo.svg" alt="Pineoc&#039;s Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/blog/">Home</a><a class="navbar-item" href="/blog/archives">Archives</a><a class="navbar-item" href="/blog/categories">Categories</a><a class="navbar-item" href="/blog/tags">Tags</a><a class="navbar-item" href="/blog/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/pineoc"><i class="fab fa-github"></i></a><a class="navbar-item search" title="검색" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-9-tablet is-9-desktop is-9-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/blog/tags">태그</a></li><li class="is-active"><a href="#" aria-current="page">ScriptRunner</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2020-06-18T07:48:00.000Z" title="2020. 6. 18. 오후 4:48:00">2020-06-18</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2022-01-16T07:25:40.751Z" title="2022. 1. 16. 오후 4:25:40">2022-01-16</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/blog/categories/PM/">PM</a><span> / </span><a class="link-muted" href="/blog/categories/PM/System/">System</a></span><span class="level-item">9분안에 읽기 (약 1317 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/2020/06/18/Jira-ScriptRunner-default-fields-setting/">ScriptRunner를 이용하여 Jira 이슈 생성시 설명(Description) 기본 값 설정하기</a></h1><div class="content"><h2 id="Needs-Jira-이슈-생성시-설명-Description-항목-기본-값-설정하기"><a href="#Needs-Jira-이슈-생성시-설명-Description-항목-기본-값-설정하기" class="headerlink" title="Needs: Jira 이슈 생성시 설명(Description) 항목 기본 값 설정하기"></a>Needs: Jira 이슈 생성시 설명(Description) 항목 기본 값 설정하기</h2><p>Jira를 사용하다 보면 이슈를 생성할 때 설명 항목에 자주 쓰는 내용들이 있습니다.<br>예를 들면, 현재 사용하는 프로젝트의 버그 이슈에서 버그에 대한 상세한 설명, 참고 사항 등이 있죠.<br>현재 사용하고 있는 프로젝트에서는 아래와 같은 내용을 버그 티켓 생성시 작성하고 있습니다.</p><h3 id="예시-버그-이슈-설명-Description-내용"><a href="#예시-버그-이슈-설명-Description-내용" class="headerlink" title="예시: 버그 이슈 설명(Description) 내용"></a>예시: 버그 이슈 설명(Description) 내용</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(QA 환경)</span><br><span class="line">환경 설명</span><br><span class="line">(상세 설명)</span><br><span class="line">상세 설명</span><br><span class="line">(참고)</span><br><span class="line">참고 설명</span><br><span class="line">(영상)</span><br><span class="line">영상 링크</span><br><span class="line">(기대 결과)</span><br><span class="line">기대 결과 설명</span><br></pre></td></tr></table></figure><p>이러한 내용을 항상 이슈 생성시 마다 작성하는 것도 번거롭고, 각 작성자가 입력하는 내용도 일정하지 않을 때가 있었습니다.<br>이런 상황들을 개선해보고자 기본 값, 템플릿을 설정할 수 있는지 확인해보았고 다른 Jira 앱(플러그인)들이 있지만 현재 설치되어있는 ScriptRunner로 개선해보았습니다.</p><h2 id="ScriptRunner로-설명-항목-기본-값-설정-Flow"><a href="#ScriptRunner로-설명-항목-기본-값-설정-Flow" class="headerlink" title="ScriptRunner로 설명 항목 기본 값 설정 Flow"></a>ScriptRunner로 설명 항목 기본 값 설정 Flow</h2><p>ScriptRunner에는 많은 기능들이 있지만 그 중에서 Behaviours 기능을 사용하여 특정 항목의 기본 값 설정을 해보겠습니다.<br>순서는 다음과 같이 진행합니다. (ScriptRunner <a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/6.3.0/jira/recipes/behaviours/setting-default-fields.html">가이드 문서 - Setting Field Defaults</a>에도 있는 내용이니 참고해주세요!)</p><p><img src="https://scriptrunner.adaptavist.com/6.3.0/image/jira/bhv/navigating-to-behaviours.png" alt="ScriptRunner Behaviours"></p><ol><li>Jira &gt; Manage apps &gt; Behaviours 이동</li><li>Add Behaviours 추가</li><li>Add Mapping - 프로젝트 및 이슈 타입 설정</li><li>Fields 설정 &gt; Initialiser 스크립트 설정</li></ol><h3 id="Add-Behaviours-추가"><a href="#Add-Behaviours-추가" class="headerlink" title="Add Behaviours 추가"></a>Add Behaviours 추가</h3><p>첫 번째 설정으로 이동하는 단계는 스킵하고 Behaviours를 추가하는 것 부터 진행하겠습니다.<br>위에 있던 이미지 항목대로 behaviour 이름을 입력해주고 Add 버튼을 누르면 끝입니다.</p><h3 id="Add-Mapping-프로젝트-및-이슈-타입-설정"><a href="#Add-Mapping-프로젝트-및-이슈-타입-설정" class="headerlink" title="Add Mapping - 프로젝트 및 이슈 타입 설정"></a>Add Mapping - 프로젝트 및 이슈 타입 설정</h3><p><img src="https://user-images.githubusercontent.com/5077086/84995592-281e5800-b187-11ea-95a8-a63988b9e2c1.png"></p><ul><li><strong>Choose projects</strong>: 프로젝트는 기본 값 설정이 필요한 프로젝트를 선택하여 지정해주시면 됩니다.</li><li><strong>Choose Issue types</strong>: 모든 이슈 타입 또는 특정 이슈 타입에 대해서 지정할 수 있습니다.</li></ul><p>이 설정으로 behaviour가 동작할 프로젝트, 이슈 타입이 맵핑되었습니다.</p><h3 id="Fields-설정-gt-Initialiser-스크립트-설정"><a href="#Fields-설정-gt-Initialiser-스크립트-설정" class="headerlink" title="Fields 설정 &gt; Initialiser 스크립트 설정"></a>Fields 설정 &gt; Initialiser 스크립트 설정</h3><p><img src="https://user-images.githubusercontent.com/5077086/84996722-9a436c80-b188-11ea-9812-f7dff1913d85.png"></p><p>Add Behaviours 화면에서 만든 behaviour 항목에 있는 Fields를 눌러 설정을 진행합니다.<br>처음에는 Initialiser Function이 없다고 나오는데 Create initialiser를 눌러 생성해주세요.<br>생성하고 나면 위와 같은 스크립트를 입력할 수 있는 항목을 볼 수 있습니다. 스크립트를 입력해볼까요?</p><p><img src="https://user-images.githubusercontent.com/5077086/84999525-3e7ae280-b18c-11ea-9faa-5702ea8d7f9f.png"></p><h4 id="스크립트"><a href="#스크립트" class="headerlink" title="스크립트"></a>스크립트</h4><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.atlassian.jira.component.ComponentAccessor</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> com.atlassian.jira.issue.IssueFieldConstants.DESCRIPTION;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (getActionName() != <span class="string">&quot;Create Issue&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="comment">// not the initial action, so don&#x27;t set default values</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> desc = getFieldById(DESCRIPTION);</span><br><span class="line"><span class="keyword">if</span> (!desc.getValue()) &#123;</span><br><span class="line">    desc.setFormValue(<span class="string">&quot;test form&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>스크립트는 심플해서 설명할 내용은 많지 않네요.</p><ul><li>Create Issue 타입의 액션이 아니면 스크립트 실행 중지</li><li>getFieldById()를 가져오고 setFormValue() 함수를 통해 이슈 생성시 form에 기본 값을 입력</li></ul><p>스크립트러너 가이드 문서에 있는 내용이 더 복잡한 내용을 담고 있어 다른 항목의 기본 값 설정시 참고하시면 좋을 것 같습니다.<br>기본 값 설정시 setFormValue() 함수에 string 값으로 설정해주시면 됩니다.<br>이미지와 스크립트가 다른 것은 설명 값이 있는지 유무를 확인하는 정도이니 설정시 참고부탁드립니다. 😀</p><h2 id="설명-항목-기본-값-설정시-참고"><a href="#설명-항목-기본-값-설정시-참고" class="headerlink" title="설명 항목 기본 값 설정시 참고"></a>설명 항목 기본 값 설정시 참고</h2><p>설명 항목 기본 값 설정하면서 몇가지 참고할 만한 사항이 있습니다.</p><ul><li>기본적으로 설명 항목은 HTML 값을 인식하기에 줄바꿈이 필요할 경우 <code>&lt;br/&gt;</code>을 입력해서 설정해주시면 됩니다.</li><li>h1, h2와 같은 항목도 마찬가지로 <code>&lt;h2&gt;</code>, <code>&lt;h3&gt;</code>로 입력해서 설정해주시면 됩니다.</li><li>만약 현재 Jira 시스템에 JEditor가 설치되어 사용중일 경우 JEditor 기능을 사용하여 기본 값을 설정해주셔야 합니다.<ul><li>이건 ScriptRunner 기능보다는 JEditor 내용이니 다른 포스트에서 다뤄보겠습니다.</li></ul></li></ul><h2 id="마무리"><a href="#마무리" class="headerlink" title="마무리"></a>마무리</h2><p>ScriptRunner 기능 중에 Behaviours 기능을 이용하여 기본 값 설정을 해보았습니다.<br>사실 다른 Jira 앱을 통해서 쉽게 설정할 수 있는데 ScriptRunner는 코드를 입력해야하는 점이 어려울 수 있겠다는 생각이 드네요.<br>(그만큼 커스텀할 수 있는 것이 많아서 좋긴 하지만요. ㅎㅎ)</p><p>다른 항목에 대한 기본 값 설정은 가이드 문서를 참고해주시구요. 다른 유용한 기능이 있다면 포스팅해보겠습니다.<br>긴글 읽어주셔서 감사합니다. 👍</p><h2 id="참고-문서-x2F-링크"><a href="#참고-문서-x2F-링크" class="headerlink" title="참고 문서 &#x2F; 링크"></a>참고 문서 &#x2F; 링크</h2><ul><li><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/6.3.0/jira/recipes/behaviours/setting-default-fields.html">https://scriptrunner.adaptavist.com/6.3.0/jira/recipes/behaviours/setting-default-fields.html</a></li><li><a target="_blank" rel="noopener" href="https://community.atlassian.com/t5/Marketplace-Apps-Integrations/Scriptrunner-behavior-default-text-and-validation-error-resets/qaq-p/581980">https://community.atlassian.com/t5/Marketplace-Apps-Integrations/Scriptrunner-behavior-default-text-and-validation-error-resets/qaq-p/581980</a></li></ul></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2020-02-28T10:37:15.000Z" title="2020. 2. 28. 오후 7:37:15">2020-02-28</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2022-01-16T07:25:40.750Z" title="2022. 1. 16. 오후 4:25:40">2022-01-16</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/blog/categories/PM/">PM</a></span><span class="level-item">11분안에 읽기 (약 1588 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/2020/02/28/Jira-Bulk-remove-issue-links-by-link-type/">Jira Bulk remove issue links (by link type)</a></h1><div class="content"><h1 id="Jira-이슈-링크-issue-link-삭제하기"><a href="#Jira-이슈-링크-issue-link-삭제하기" class="headerlink" title="Jira 이슈 링크(issue link) 삭제하기"></a>Jira 이슈 링크(issue link) 삭제하기</h1><p>관련 포스트: <a href="/blog/2020/02/23/Bulk-remove-change-Jira-issue-links/" title="Bulk remove change Jira issue links">Bulk remove change Jira issue links</a><br>위 포스트에서는 이슈에 걸려있는 모든 링크를 삭제하는 것을 공유드렸었습니다.<br>이번 포스트에서는 이슈에 걸려있는 링크 중에 특정 타입의 링크를 삭제하는 방법을 공유해보겠습니다.</p><h2 id="이슈-이슈-링크"><a href="#이슈-이슈-링크" class="headerlink" title="이슈 - 이슈 링크"></a>이슈 - 이슈 링크</h2><p>Jira에서 이슈와 이슈를 연결해주는 이슈 링크,<br>전의 포스트에서는 링크를 그냥 다 삭제하는 포스트였기에 자세히 다루지는 않았지만 이번 포스트에서는 링크 타입에 대해 알아야 정확하게 삭제할 수 있기에 조금 더 자세히 설명해보고자 합니다.</p><p><img src="https://user-images.githubusercontent.com/5077086/75603626-8ad5e000-5b13-11ea-8e18-3dde7627b794.png" alt="Administration &gt; issues &gt; Issue linking 설정 화면"></p><p>위와 같이 이슈 링크 속성에는 <code>Name</code>, <code>Outward Description</code>, <code>Inward Description</code> 항목이 있습니다.</p><blockquote><p>한국어 버전으로는 이슈 링크 속성 이름이 명확한지 모르겠지만 다음과 같네요. <code>이름(Name)</code>, <code>가르키는 입장 설명(Outward Desc)</code>, <code>받는 입장 설명(Inward Desc)</code></p></blockquote><p>Jira 시스템에 기본적으로 있는 이슈 링크 타입은 4개로 <code>Blocks</code>, <code>Cloners</code>, <code>Duplicate</code>, <code>Relates</code> 이렇게 구성되어 있습니다.<br>각각 링크 타입 항목들을 보면 이슈와 이슈를 연결했을 때 각 이슈에 보이는 링크의 이름이 다르게 보일 수 있도록 설정할 수 있습니다.</p><p>이슈 링크를 설정하고 어떻게 보이는지 아래의 문서 링크를 참고하시면 좋을 것 같습니다.<br><a target="_blank" rel="noopener" href="https://confluence.atlassian.com/jiracoreserver/linking-issues-939937913.html">(EN) Jira Docs: linking issues</a></p><p>“이슈 - 이슈 링크”의 관계를 정리해보자면, 아래와 같이 볼 수 있겠습니다.</p><ul><li>이슈는 <strong>목적지</strong></li><li>이슈 링크는 <strong>출발지와 도착지 정보를 가지고 있는 화살표</strong></li></ul><h2 id="이슈-링크-타입-확인해보자"><a href="#이슈-링크-타입-확인해보자" class="headerlink" title="이슈 링크 타입 확인해보자"></a>이슈 링크 타입 확인해보자</h2><p>개념적인 설명은 이만 마치고 스크립트를 통해 이슈에 있는 이슈 링크들을 한번 확인해보겠습니다.<br>우선 테스트를 위해 이슈에 설정한 이슈 링크들은 아래와 같습니다.</p><p><img src="https://user-images.githubusercontent.com/5077086/75604076-5fa1bf80-5b18-11ea-8a20-41cda7e01a67.png" alt="PUB-16 issue link 설정"></p><p>링크된 항목들을 정리해보면 다음과 같습니다. 괄호 내용은 이슈 링크 이름입니다.</p><ul><li>PUB-16 (blocks) PUB-1</li><li>PUB-16 (blocks) PUB-2</li><li>PUB-16 (blocks) PUB-3</li><li>PUB-16 (clones) PUB-5570</li><li>PUB-16 (duplicates) PUB-17</li><li>PUB-16 (is blocked by) PUB-4</li></ul><p>PUB-16 이슈에 연결된 이슈 링크들을 확인하기 위한 스크립트 입니다.<br>스크립트를 ScriptRunner에 Script console에서 실행된 내용을 볼 수 있습니다.</p><h3 id="스크립트-코드"><a href="#스크립트-코드" class="headerlink" title="스크립트 코드"></a>스크립트 코드</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.atlassian.jira.component.ComponentAccessor</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.issue.IssueManager</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.jql.parser.JqlQueryParser</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.bc.issue.search.SearchService</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.web.bean.PagerFilter</span><br><span class="line"><span class="keyword">import</span> com.atlassian.query.Query</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> searchService = ComponentAccessor.getComponent(SearchService)</span><br><span class="line"><span class="keyword">def</span> jqlQueryParser = ComponentAccessor.getComponent(JqlQueryParser)</span><br><span class="line"><span class="keyword">def</span> user = ComponentAccessor.getJiraAuthenticationContext().getLoggedInUser()</span><br><span class="line"><span class="keyword">def</span> results = searchService.search(user, jqlQueryParser.parseQuery(<span class="string">&quot;key=PUB-16&quot;</span>), PagerFilter.getUnlimitedFilter())</span><br><span class="line"><span class="keyword">def</span> issueManager = ComponentAccessor.getIssueManager()</span><br><span class="line"><span class="keyword">def</span> issueLinkManager = ComponentAccessor.getIssueLinkManager()</span><br><span class="line"></span><br><span class="line">results.getResults().each</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">def</span> issue = issueManager.getIssueObject(it.id)</span><br><span class="line">  log.warn(<span class="string">&quot;Get InwardLinks&quot;</span>)</span><br><span class="line">  <span class="keyword">def</span> linkInwardList = issueLinkManager.getInwardLinks(issue.getId())</span><br><span class="line">  linkInwardList.each &#123;</span><br><span class="line">    log.warn(<span class="string">&quot;$&#123;it.getIssueLinkType().getName()&#125;, $&#123;it.getSourceObject().getKey()&#125;&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  log.warn(<span class="string">&quot;Get OutwardLinks&quot;</span>)</span><br><span class="line">  <span class="keyword">def</span> linkOutwardList = issueLinkManager.getOutwardLinks(issue.getId())</span><br><span class="line">  linkOutwardList.each &#123;</span><br><span class="line">    log.warn(<span class="string">&quot;$&#123;it.getIssueLinkType().getName()&#125;, $&#123;it.getDestinationObject().getKey()&#125;&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="스크립트-실행-결과"><a href="#스크립트-실행-결과" class="headerlink" title="스크립트 실행 결과"></a>스크립트 실행 결과</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">...: Get InwardLinks</span><br><span class="line">...: Blocks, PUB-4</span><br><span class="line">...: Duplicate, PUB-17</span><br><span class="line">...: Get OutwardLinks</span><br><span class="line">...: Blocks, PUB-1</span><br><span class="line">...: Blocks, PUB-2</span><br><span class="line">...: Blocks, PUB-3</span><br><span class="line">...: Clones, PUB-5570</span><br></pre></td></tr></table></figure><h2 id="이슈-링크-타입에-따라-이슈-링크를-삭제해보자"><a href="#이슈-링크-타입에-따라-이슈-링크를-삭제해보자" class="headerlink" title="이슈 링크 타입에 따라 이슈 링크를 삭제해보자"></a>이슈 링크 타입에 따라 이슈 링크를 삭제해보자</h2><p>이슈 링크 타입을 확인했으니 이슈 링크 타입에 따라 삭제할 수 있게 되었습니다.<br>사실 위 링크 확인 스크립트 코드에서 <strong>타입</strong>과 <strong>inward&#x2F;outward</strong> 만 확인해서 이슈 링크 삭제 함수만 사용하면 우리가 원하는 링크 삭제가 가능합니다.</p><h3 id="이슈-링크-타입-확인-amp-삭제"><a href="#이슈-링크-타입-확인-amp-삭제" class="headerlink" title="이슈 링크 타입 확인 &amp; 삭제"></a>이슈 링크 타입 확인 &amp; 삭제</h3><p>이슈 링크 타입을 확인하는 것 자체는 어렵지 않습니다.<br><code>issueLinkObj.getIssueLinkType().getName()</code>로 이름을 확인하면 되니까요.<br>다만 Inward, Outward 링크 타입을 확인해야하는데, 삭제할 때에 아래 옵션을 선택할 수 있도록 함수를 만들어야겠네요.</p><ul><li>Inward 링크만</li><li>Outward 링크만</li><li>모든 링크</li></ul><p>삭제 함수도 간단합니다. 참고: <a target="_blank" rel="noopener" href="https://docs.atlassian.com/software/jira/docs/api/8.5.1/com/atlassian/jira/issue/link/IssueLinkManager.html#removeIssueLink-com.atlassian.jira.issue.link.IssueLink-com.atlassian.jira.user.ApplicationUser-">Jira API Docs: IssueLinkManager.removeIssueLink()</a><br>아래 함수를 위에서 확인한 이슈 링크를 파라미터로 호출하면 링크 삭제가 가능합니다.</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// issueLink - the issue link to remove</span></span><br><span class="line"><span class="comment">// remoteUser - needed for creation of change items</span></span><br><span class="line"><span class="keyword">void</span> removeIssueLink(IssueLink issueLink, ApplicationUser remoteUser)</span><br></pre></td></tr></table></figure><h3 id="스크립트-코드-1"><a href="#스크립트-코드-1" class="headerlink" title="스크립트 코드"></a>스크립트 코드</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.atlassian.jira.component.ComponentAccessor</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.issue.IssueManager</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.jql.parser.JqlQueryParser</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.bc.issue.search.SearchService</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.web.bean.PagerFilter</span><br><span class="line"><span class="keyword">import</span> com.atlassian.query.Query</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.issue.MutableIssue</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> searchService = ComponentAccessor.getComponent(SearchService)</span><br><span class="line"><span class="keyword">def</span> jqlQueryParser = ComponentAccessor.getComponent(JqlQueryParser)</span><br><span class="line"><span class="keyword">def</span> issueManager = ComponentAccessor.getIssueManager()</span><br><span class="line"><span class="keyword">def</span> issueLinkManager = ComponentAccessor.getIssueLinkManager()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> user = ComponentAccessor.getJiraAuthenticationContext().getLoggedInUser()</span><br><span class="line"><span class="comment">// <span class="doctag">NOTE:</span> jql options</span></span><br><span class="line"><span class="keyword">def</span> results = searchService.search(user, jqlQueryParser.parseQuery(<span class="string">&quot;key=PUBGTEST-3&quot;</span>), PagerFilter.getUnlimitedFilter())</span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">NOTE:</span> remove link options</span></span><br><span class="line"><span class="keyword">def</span> removeLinkType = <span class="string">&quot;Blocks&quot;</span></span><br><span class="line"><span class="keyword">def</span> removeLinkIO = <span class="string">&quot;all&quot;</span> <span class="comment">// all, inward, outward</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> removeInwardLinks = &#123;MutableIssue issue -&gt;</span><br><span class="line">  <span class="keyword">def</span> linkInwardList = issueLinkManager.getInwardLinks(issue.getId())</span><br><span class="line">  linkInwardList.each &#123;</span><br><span class="line">    <span class="keyword">def</span> link = it</span><br><span class="line">    <span class="keyword">if</span> (link.getIssueLinkType().getName() == removeLinkType) &#123;</span><br><span class="line">      log.warn(<span class="string">&quot;removed links: $&#123;link.getIssueLinkType().getName()&#125;, $&#123;link.getSourceObject().getKey()&#125;&quot;</span>)</span><br><span class="line">      issueLinkManager.removeIssueLink(link, user)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">def</span> removeOutwardLinks = &#123;MutableIssue issue -&gt;</span><br><span class="line">  <span class="keyword">def</span> linkInwardList = issueLinkManager.getOutwardLinks(issue.getId())</span><br><span class="line">  linkInwardList.each &#123;</span><br><span class="line">    <span class="keyword">def</span> link = it</span><br><span class="line">    <span class="keyword">if</span> (link.getIssueLinkType().getName() == removeLinkType) &#123;</span><br><span class="line">      log.warn(<span class="string">&quot;removed links: $&#123;it.getIssueLinkType().getName()&#125;, $&#123;it.getDestinationObject().getKey()&#125;&quot;</span>)</span><br><span class="line">      issueLinkManager.removeIssueLink(link, user)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">results.getResults().each &#123;</span><br><span class="line">  <span class="keyword">def</span> issue = issueManager.getIssueObject(it.id)</span><br><span class="line">  <span class="keyword">if</span> (removeLinkIO == <span class="string">&quot;all&quot;</span> || removeLinkIO == <span class="string">&quot;inward&quot;</span>) &#123;</span><br><span class="line">    log.warn(<span class="string">&quot;Get &amp; Remove InwardLinks&quot;</span>)</span><br><span class="line">    removeInwardLinks(issue)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (removeLinkIO == <span class="string">&quot;all&quot;</span> || removeLinkIO == <span class="string">&quot;outward&quot;</span>) &#123;</span><br><span class="line">    log.warn(<span class="string">&quot;Get &amp; Remove OutwardLinks&quot;</span>)</span><br><span class="line">    removeOutwardLinks(issue)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="스크립트-결과"><a href="#스크립트-결과" class="headerlink" title="스크립트 결과"></a>스크립트 결과</h3><p>현재 스크립트 상으로는 <strong>all(inward, outward)</strong>, <strong>blocks</strong> 타입의 링크만 삭제하도록 구성되어 있어 실행시 blocks 타입의 링크가 모두 삭제됩니다.</p><h2 id="활용"><a href="#활용" class="headerlink" title="활용"></a>활용</h2><p>위 스크립트를 활용시에는 <strong>NOTE:</strong> 라고 표시된 내용에 링크 삭제가 필요한 이슈, 링크 타입을 알맞게 변경을 한 뒤에 사용하시면 됩니다.<br>이슈 링크 삭제 시에 주의해서 사용해주세요!</p><h2 id="마무리"><a href="#마무리" class="headerlink" title="마무리"></a>마무리</h2><p>이번 내용은 약간 길어졌는데요. 포스트를 작성하면서 이슈와 이슈 링크의 관계, 이슈 링크의 속성 등에 대해서 공부할 수 있어서 좋았고 이 글을 보시는 다른분들도 스크립트를 이용하여 원하는 이슈 링크를 삭제할 수 있었으면 좋겠습니다.<br>감사합니다. 😀</p></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2020-02-22T16:17:16.000Z" title="2020. 2. 23. 오전 1:17:16">2020-02-23</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2022-01-16T07:25:40.744Z" title="2022. 1. 16. 오후 4:25:40">2022-01-16</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/blog/categories/PM/">PM</a></span><span class="level-item">7분안에 읽기 (약 1072 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/2020/02/23/Bulk-remove-change-Jira-issue-links/">Bulk remove change Jira issue links</a></h1><div class="content"><h1 id="Jira-이슈에-연결되어있는-이슈-링크-한번에-삭제하기"><a href="#Jira-이슈에-연결되어있는-이슈-링크-한번에-삭제하기" class="headerlink" title="Jira 이슈에 연결되어있는 이슈 링크 한번에 삭제하기"></a>Jira 이슈에 연결되어있는 이슈 링크 한번에 삭제하기</h1><p>참고: <a target="_blank" rel="noopener" href="https://community.atlassian.com/t5/Jira-questions/Bulk-remove-change-issue-links-in-Jira/qaq-p/659381">https://community.atlassian.com/t5/Jira-questions/Bulk-remove-change-issue-links-in-Jira/qaq-p/659381</a></p><h2 id="문제-인식"><a href="#문제-인식" class="headerlink" title="문제 인식"></a>문제 인식</h2><p>최근 특정 Jira 이슈에 연결된 이슈들을 삭제해야하는 일이 있었습니다.<br>(한 작업 이슈에 확인한 버그를 모두 링크를 달고 링크된 버그 이슈들을 보다가 링크 타입이 잘못된 것도 있는 등의 이슈가 있어 수정이 필요했습니다.)<br>Bulk로 링크들을 삭제하는 기능이 있는지 찾아보았는데 없더군요. 그래서 스크립트러너로 가능한지 찾아보았습니다.</p><p><img src="https://user-images.githubusercontent.com/5077086/75095788-11eafb80-55dc-11ea-997f-30ae5dfed055.png" alt="하나하나에 커서를 놓고 지워야합니다"></p><p>다행히, 당연하게도 이미 같은 고민을 했던 사람들이 있었고 아틀라시안 커뮤니티 채널에 해결방법이 있었습니다.<br>기본 Jira 기능에는 없지만 스크립트러너를 사용해서 가능하다는 것이었죠.</p><p>제가 현재 사용하고 있는 Jira 버전은 8.5여서 위 링크의 8.x 코드를 보면서 설명해보고자 합니다.<br>(위 링크에 7.13 버전에서 사용할 수 있는 코드도 있으니 참고해서 쓰시면 됩니다.)</p><h2 id="문제-해결-방법-ScriptRunner"><a href="#문제-해결-방법-ScriptRunner" class="headerlink" title="문제 해결 방법 (ScriptRunner)"></a>문제 해결 방법 (ScriptRunner)</h2><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.atlassian.jira.component.ComponentAccessor</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.issue.IssueManager</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.jql.parser.JqlQueryParser</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.bc.issue.search.SearchService</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.web.bean.PagerFilter</span><br><span class="line"><span class="keyword">import</span> com.atlassian.query.Query</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> searchService = ComponentAccessor.getComponent(SearchService)</span><br><span class="line"><span class="keyword">def</span> jqlQueryParser = ComponentAccessor.getComponent(JqlQueryParser)</span><br><span class="line"><span class="keyword">def</span> user = ComponentAccessor.getJiraAuthenticationContext().getLoggedInUser()</span><br><span class="line"><span class="keyword">def</span> results = searchService.search(user, jqlQueryParser.parseQuery(<span class="string">&quot;Your JQL Filter&quot;</span>), PagerFilter.getUnlimitedFilter())</span><br><span class="line"><span class="keyword">def</span> issueManager = ComponentAccessor.getIssueManager()</span><br><span class="line"></span><br><span class="line">results.getResults().each</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">def</span> issue = issueManager.getIssueObject(it.id)</span><br><span class="line">  log.warn(issue.key)</span><br><span class="line">  <span class="comment">// get all linked issues</span></span><br><span class="line">  log.warn(ComponentAccessor.issueLinkManager.getLinkCollection(issue, user).getAllIssues())</span><br><span class="line">  ComponentAccessor.issueLinkManager.removeIssueLinks(issue, user)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>로그 관련한 코드는 설명 중 불필요하여 삭제했습니다. 실제 코드 동작하는데에 영향이 없습니다.<br>사실 코드 상으로는 크게 어려운 부분이 없습니다.</p><h3 id="스크립트-Flow"><a href="#스크립트-Flow" class="headerlink" title="스크립트 Flow"></a>스크립트 Flow</h3><ol><li>검색, JQL 파서, 사용자, 이슈 컨트롤러를 정의한다. (검색 및 설정 준비 과정)</li><li>JQL을 통해 이슈들을 가져온다.</li><li>각 이슈들의 모든 링크를 삭제한다.</li></ol><h3 id="issueLinkManager-removeIssueLinks"><a href="#issueLinkManager-removeIssueLinks" class="headerlink" title="issueLinkManager, removeIssueLinks"></a>issueLinkManager, removeIssueLinks</h3><p>issueLinkManager 인터페이스 설명은 <a target="_blank" rel="noopener" href="https://docs.atlassian.com/software/jira/docs/api/8.5.1/com/atlassian/jira/issue/link/IssueLinkManager.html">jira&#x2F;docs&#x2F;api&#x2F;8.5.1&#x2F;…&#x2F;IssueLinkManager</a> 이 문서에서 볼 수 있습니다.<br>이 매니저에는 여러가지 함수들이 있습니다. 이슈 링크의 생성, 삭제, 조회, 변경 등이 가능합니다.</p><p>removeIssueLinks() 함수도 위 issueLinkManager에서 볼 수 있는데요.</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> removeIssueLinks(Issue issue, ApplicationUser remoteUser)</span><br><span class="line"><span class="comment">// Parameters:</span></span><br><span class="line"><span class="comment">// issue - the Issue</span></span><br><span class="line"><span class="comment">// remoteUser - the remote user</span></span><br><span class="line"><span class="comment">// Returns:</span></span><br><span class="line"><span class="comment">// The total number of issuelinks deleted.</span></span><br></pre></td></tr></table></figure><p>모든 링크를 삭제하고자하는 이슈와 삭제할 때 필요한 사용자를 받아 함수가 동작합니다.</p><h3 id="스크립트-결과"><a href="#스크립트-결과" class="headerlink" title="스크립트 결과"></a>스크립트 결과</h3><p>맨 처음 이미지를 보여드렸던 이슈의 키를 JQL로 입력하고 실행해보겠습니다.<br>“key&#x3D;PUBGTEST-112”로 입력하고 스크립트 콘솔에서 테스트 해보았습니다.</p><p><img src="https://user-images.githubusercontent.com/5077086/75096410-b7a16900-55e2-11ea-98c1-2efedb7842d5.png"></p><p>Logs:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2020-02-23 02:16:42,545 WARN [runner.AbstractScriptRunner]: PUBGTEST-112</span><br><span class="line">2020-02-23 02:16:42,545 WARN [runner.AbstractScriptRunner]: [PUBGTEST-75, PUBGTEST-111, PUBGTEST-225]</span><br></pre></td></tr></table></figure><p>Timing: Elapsed: 4949 ms &#x2F; CPU time: 531 ms<br>동작하는데 생각보다 시간이 많이 걸리긴 하네요.<br>(약 5초 정도 걸리는 것으로 보이는데 링크 삭제가 오래걸리는 것인지 다른 것이 오래걸리는 것인지는 봐야겠습니다.)</p><p>실행 결과로는 이슈의 히스토리에 아래와 같이 남았습니다.<br><img src="https://user-images.githubusercontent.com/5077086/75096443-fd5e3180-55e2-11ea-9e5f-4e6164812b95.png" alt="삭제 완료!"></p><p>링크가 걸려있는 이슈의 모든 이슈 링크들이 삭제되었습니다! 👍</p><h2 id="문제-해결"><a href="#문제-해결" class="headerlink" title="문제 해결!"></a>문제 해결!</h2><p>제가 했던 하나의 이슈만 링크를 삭제할 수도 있고 JQL로 검색된 모든 이슈들의 모든 링크를 삭제할 수 있습니다.<br>다만 여기서 제가 원했던 것은 모든 링크의 삭제가 아니라 특정 타입의 링크들만 삭제하고 싶었던 것이어서<br>다음 포스트에서는 특정 링크 타입의 링크를 삭제하는 내용으로 한번 더 다뤄봐야겠습니다.</p><p>다음 포스트에서 만나요! :)</p></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2019-12-01T14:11:27.000Z" title="2019. 12. 1. 오후 11:11:27">2019-12-01</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2022-01-16T07:25:40.756Z" title="2022. 1. 16. 오후 4:25:40">2022-01-16</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/blog/categories/PM/">PM</a><span> / </span><a class="link-muted" href="/blog/categories/PM/System/">System</a></span><span class="level-item">10분안에 읽기 (약 1504 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/2019/12/01/ScriptRunner-Label-autowatch/">ScriptRunner Jira Issue Label 추가시 자동으로 watcher 추가</a></h1><div class="content"><p>스크립트러너에서 Jira 이슈의 Label 추가에 따라 자동으로 특정 사람들을 와쳐(watcher)에 추가하는 방법을 다뤄봅니다.</p><h2 id="시스템-테스트-환경"><a href="#시스템-테스트-환경" class="headerlink" title="시스템 테스트 환경"></a>시스템 테스트 환경</h2><ul><li>Jira: Jira Software 8.3.2</li><li>ScriptRunner: 5.6.1.1-jira8</li></ul><h2 id="참고-포스트"><a href="#참고-포스트" class="headerlink" title="참고 포스트"></a>참고 포스트</h2><ul><li>Listener에 대한 내용 참고 포스트: <a href="/blog/2019/04/21/scriptrunner2/" title="ScriptRunner 소개 2">ScriptRunner 소개 2</a></li><li>Label 관련 내용을 다룬 포스트: <a href="/blog/2019/10/27/ScriptRunner-Label/" title="ScriptRunner Label 다루기">ScriptRunner Label 다루기</a></li></ul><h2 id="사용-시나리오"><a href="#사용-시나리오" class="headerlink" title="사용 시나리오"></a>사용 시나리오</h2><p>적용하는 방법 전에 제가 사용하고 있는 시나리오를 공유드립니다.<br>특정 이벤트에 따라 와쳐를 추가할 수 있으니 이벤트만 잘 고려해서 <code>와쳐 추가 코드</code>만 사용하셔도 괜찮습니다.</p><ol><li>특정 레이블(Label)이 이슈에 추가됨</li><li>레이블이 추가된 이슈에 원하는 인원을 와쳐 필드에 입력함</li><li>와쳐 인원 입력은 복수의 인원이 가능해야함</li></ol><p>여기서 특정 이벤트는 <code>레이블 추가</code> 입니다.<br>다른 이벤트의 예시로는 <code>컴포넌트 추가</code>, <code>특정 커스텀 필드 값의 변경</code> 등 다양하게 조건을 변경해볼 수 있을 것 같네요.</p><h2 id="적용"><a href="#적용" class="headerlink" title="적용"></a>적용</h2><p>앞서 설명드린 시나리오대로 적용해보겠습니다.<br>바로 적용해보고 싶으신 분들을 위해 먼저 코드와 설정 화면을 보여드리겠습니다.</p><p><img src="https://user-images.githubusercontent.com/5077086/69915509-1dbe9a00-1493-11ea-854a-66226c3ff935.png" alt="Listener - Custom Listener 선택"></p><p><img src="https://user-images.githubusercontent.com/5077086/69915636-a0942480-1494-11ea-8598-844dc87e5c8d.png" alt="Custom Listener field 입력"></p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.atlassian.jira.component.ComponentAccessor;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> watcherManager = ComponentAccessor.getWatcherManager();</span><br><span class="line"><span class="keyword">def</span> userManager = ComponentAccessor.getUserManager();</span><br><span class="line"><span class="comment">// Add users to watcher field</span></span><br><span class="line"><span class="keyword">def</span> watchUsers = &#123;usernames -&gt;</span><br><span class="line">  usernames.each &#123;</span><br><span class="line">    <span class="keyword">def</span> user = userManager.getUserByKey(it.toString());</span><br><span class="line">    watcherManager.startWatching(user, event.issue);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Remove users on watcher field</span></span><br><span class="line"><span class="keyword">def</span> unwatchUsers = &#123;usernames -&gt;</span><br><span class="line">  usernames.each &#123;</span><br><span class="line">    <span class="keyword">def</span> user = userManager.getUserByKey(it.toString());</span><br><span class="line">    watcherManager.stopWatching(user, event.issue);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">def</span> labelWatch = &#123;String label, List users, String[] oldArr, String[] newArr, <span class="keyword">boolean</span> isCaseSensitive -&gt;</span><br><span class="line">  String[] tmpOldArr = oldArr.collect &#123;String i -&gt;</span><br><span class="line">    <span class="keyword">if</span> (isCaseSensitive)</span><br><span class="line">      <span class="keyword">return</span> i;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="keyword">return</span> i.toLowerCase();</span><br><span class="line">  &#125;;</span><br><span class="line">  String[] tmpNewArr = newArr.collect &#123;String i -&gt;</span><br><span class="line">    <span class="keyword">if</span> (isCaseSensitive)</span><br><span class="line">      <span class="keyword">return</span> i;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="keyword">return</span> i.toLowerCase();</span><br><span class="line">  &#125;</span><br><span class="line">  String tmpLabel = isCaseSensitive ? label : label.toLowerCase();</span><br><span class="line">  <span class="keyword">if</span> (tmpOldArr.contains(tmpLabel) == <span class="literal">false</span> &amp;&amp; tmpNewArr.contains(tmpLabel) == <span class="literal">true</span>) &#123;</span><br><span class="line">    watchUsers(users);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (tmpOldArr.contains(tmpLabel) == <span class="literal">true</span> &amp;&amp; tmpNewArr.contains(tmpLabel) == <span class="literal">false</span>) &#123;</span><br><span class="line">    unwatchUsers(users);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">def</span> labelWatchCreated = &#123;String label, List users, <span class="keyword">boolean</span> isCaseSensitive -&gt;</span><br><span class="line">  String[] labels = event.issue.labels <span class="keyword">as</span> String[];</span><br><span class="line">  String[] tmpLabels = labels.collect &#123;String i -&gt;</span><br><span class="line">    <span class="keyword">if</span> (isCaseSensitive)</span><br><span class="line">      <span class="keyword">return</span> i;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="keyword">return</span> i.toLowerCase();</span><br><span class="line">  &#125;</span><br><span class="line">  String tmpLabel = isCaseSensitive ? label : label.toLowerCase();</span><br><span class="line">  <span class="keyword">if</span> (tmpLabels.contains(tmpLabel)) &#123;</span><br><span class="line">    watchUsers(users);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> change = event?.getChangeLog()?.getRelated(<span class="string">&quot;ChildChangeItem&quot;</span>)?.find &#123;it.field == <span class="string">&quot;labels&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">if (change) &#123;</span><br><span class="line">  <span class="comment">// Issue Updated case</span></span><br><span class="line">  String[] oldArr = change.oldstring.toString().tokenize();</span><br><span class="line">  String[] newArr = change.newstring.toString().tokenize();</span><br><span class="line"></span><br><span class="line">  labelWatch(<span class="string">&quot;m&quot;</span>, [<span class="string">&quot;m1&quot;</span>, <span class="string">&quot;m2&quot;</span>, <span class="string">&quot;m3&quot;</span>], oldArr, newArr, false);</span><br><span class="line">  labelWatch(<span class="string">&quot;b&quot;</span>, [<span class="string">&quot;b1&quot;</span>, <span class="string">&quot;b2&quot;</span>, <span class="string">&quot;b3&quot;</span>, <span class="string">&quot;b4&quot;</span>, <span class="string">&quot;b5&quot;</span>], oldArr, newArr, true);</span><br><span class="line">&#125; else &#123;</span><br><span class="line">  <span class="comment">// Issue Created case: $&#123;event.issue&#125; $&#123;event.issue.labels&#125;</span></span><br><span class="line">  labelWatchCreated(<span class="string">&quot;m&quot;</span>, [<span class="string">&quot;m1&quot;</span>, <span class="string">&quot;m2&quot;</span>, <span class="string">&quot;m3&quot;</span>], false);</span><br><span class="line">  labelWatchCreated(<span class="string">&quot;b&quot;</span>, [<span class="string">&quot;b1&quot;</span>, <span class="string">&quot;b2&quot;</span>, <span class="string">&quot;b3&quot;</span>, <span class="string">&quot;b4&quot;</span>, <span class="string">&quot;b5&quot;</span>], true);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h3><p>위와 같이 설정하고 Update 버튼을 눌러주시면 적용됩니다.<br>코드가 깔끔하지는 않으나 동작하고 있는 코드입니다. (코드 개선은 향후 조금씩 진행해보겠습니다.)<br>다만 적용 전에 각자에 맞게 설정해야하는 값은 아래와 같습니다.</p><ol><li><code>labelWatch()</code>를 호출시 “m”은 레이블 이름을, []안에는 와쳐 필드에 추가하고자 하는 유저의 아이디들을 입력해주세요.</li><li><code>labelWatchCreated()</code>를 호출시 1번 항목과 동일하게 입력해주세요.</li></ol><ul><li>이 함수를 추가하는 이유는 이슈 생성시 이벤트가 다르게 처리되기 때문입니다.</li><li>이슈 생성시 이벤트를 실행시키지 않고자 한다면 해당 코드를 지워도 괜찮습니다.</li></ul><ol start="3"><li><code>labelWatch()</code>, <code>labelWatchCreated()</code> 함수 마지막 인자는 레이블의 대소문자를 구분할 것인지에 대한 변수입니다.</li></ol><ul><li>레이블 값의 대소문자를 구분하고자한다면 <code>true</code>, 아니라면 <code>false</code> 값을 넣고 호출해주세요.</li></ul><h2 id="코드-설명"><a href="#코드-설명" class="headerlink" title="코드 설명"></a>코드 설명</h2><p>코드에 대한 설명 내용이 많지않지만 각 함수별로 짧게 설명드리겠습니다.</p><h3 id="watchUsers-usernames-x2F-unwatchUsers-usernames"><a href="#watchUsers-usernames-x2F-unwatchUsers-usernames" class="headerlink" title="watchUsers(usernames) &#x2F; unwatchUsers(usernames)"></a>watchUsers(usernames) &#x2F; unwatchUsers(usernames)</h3><p>변수로 전달받은 유저들을 이벤트가 발생한 이슈의 와쳐 필드에 입력&#x2F;삭제합니다.</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> watcherManager = ComponentAccessor.getWatcherManager();</span><br><span class="line"><span class="keyword">def</span> userManager = ComponentAccessor.getUserManager();</span><br><span class="line"><span class="comment">// Add users to watcher field</span></span><br><span class="line"><span class="keyword">def</span> watchUsers = &#123;usernames -&gt;</span><br><span class="line">  usernames.each &#123;</span><br><span class="line">    <span class="keyword">def</span> user = userManager.getUserByKey(it.toString());</span><br><span class="line">    watcherManager.startWatching(user, event.issue);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Remove users on watcher field</span></span><br><span class="line"><span class="keyword">def</span> unwatchUsers = &#123;usernames -&gt;</span><br><span class="line">  usernames.each &#123;</span><br><span class="line">    <span class="keyword">def</span> user = userManager.getUserByKey(it.toString());</span><br><span class="line">    watcherManager.stopWatching(user, event.issue);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>유저를 의미하는 <code>usernames</code>이라는 string 배열 인수를 받아 처리합니다.</li><li><code>watcherManager</code>에 있는 <code>startWatching()</code>, <code>stopWatching()</code> 함수로 와쳐를 추가하고 삭제합니다.</li></ul><h3 id="labelWatch-label-users-oldArr-newArr-isCaseSensitive"><a href="#labelWatch-label-users-oldArr-newArr-isCaseSensitive" class="headerlink" title="labelWatch (label, users, oldArr, newArr, isCaseSensitive)"></a>labelWatch (label, users, oldArr, newArr, isCaseSensitive)</h3><p>레이블과 변경전 레이블 배열, 변경후 레이블 배열을 받아 레이블이 변경되었는지 확인합니다. 추가적으로 <code>isCaseSensitive</code> 인수를 통해 레이블의 대소문자를 구분하여 확인합니다.<br>확인 후, 받은 유저들을 이슈의 와쳐 필드에 추가 또는 삭제합니다.<br>(watchUsers(), unwatchUsers() 함수로)<br>이슈가 업데이트될 경우에만 호출되는 함수입니다. 생성시에는 아래에 있는 <code>labelWatchCreated()</code> 함수가 호출됩니다.</p><h3 id="labelWatchCreated-label-users-isCaseSensitive"><a href="#labelWatchCreated-label-users-isCaseSensitive" class="headerlink" title="labelWatchCreated(label, users, isCaseSensitive)"></a>labelWatchCreated(label, users, isCaseSensitive)</h3><p>이슈 생성시에는 변경된 사항이 없기에 issue Created 이벤트를 받아 처리해야했습니다.<br>추가 함수를 통해 이슈 생성시에도 와쳐가 추가될 수 있도록 만든 함수입니다.</p><p><code>labelWatch()</code> 함수처럼 레이블과 유저를 받고 받은 레이블이 값에 있을 경우 유저를 이슈의 와쳐 필드에 추가합니다.</p><h3 id="실행-코드"><a href="#실행-코드" class="headerlink" title="실행 코드"></a>실행 코드</h3><p>실행 코드는 위에서 설명한 함수를 사용하여 와쳐 추가를 실행합니다.</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> change = event?.getChangeLog()?.getRelated(<span class="string">&quot;ChildChangeItem&quot;</span>)?.find &#123;it.field == <span class="string">&quot;labels&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">if (change) &#123;</span><br><span class="line">  <span class="comment">// Issue Updated case</span></span><br><span class="line">  String[] oldArr = change.oldstring.toString().tokenize();</span><br><span class="line">  String[] newArr = change.newstring.toString().tokenize();</span><br><span class="line"></span><br><span class="line">  labelWatch(<span class="string">&quot;m&quot;</span>, [<span class="string">&quot;m1&quot;</span>, <span class="string">&quot;m2&quot;</span>, <span class="string">&quot;m3&quot;</span>], oldArr, newArr, false);</span><br><span class="line">  labelWatch(<span class="string">&quot;b&quot;</span>, [<span class="string">&quot;b1&quot;</span>, <span class="string">&quot;b2&quot;</span>, <span class="string">&quot;b3&quot;</span>, <span class="string">&quot;b4&quot;</span>, <span class="string">&quot;b5&quot;</span>], oldArr, newArr, true);</span><br><span class="line">&#125; else &#123;</span><br><span class="line">  <span class="comment">// Issue Created case: $&#123;event.issue&#125; $&#123;event.issue.labels&#125;</span></span><br><span class="line">  labelWatchCreated(<span class="string">&quot;m&quot;</span>, [<span class="string">&quot;m1&quot;</span>, <span class="string">&quot;m2&quot;</span>, <span class="string">&quot;m3&quot;</span>], false);</span><br><span class="line">  labelWatchCreated(<span class="string">&quot;b&quot;</span>, [<span class="string">&quot;b1&quot;</span>, <span class="string">&quot;b2&quot;</span>, <span class="string">&quot;b3&quot;</span>, <span class="string">&quot;b4&quot;</span>, <span class="string">&quot;b5&quot;</span>], true);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="마무리"><a href="#마무리" class="headerlink" title="마무리"></a>마무리</h2><p>실제로 빠르게 적용해보고 사용해본 코드라 깔끔하지 않을 수 있지만<br>다른분들도 사용해볼 수 있도록 포스트해보았습니다.</p><p>업무에 도움이 될 수 있기를 바라며 다른 방법도 추후에 올려보겠습니다.<br>감사합니다.</p></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2019-10-27T06:21:10.000Z" title="2019. 10. 27. 오후 3:21:10">2019-10-27</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2022-01-16T07:25:40.757Z" title="2022. 1. 16. 오후 4:25:40">2022-01-16</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/blog/categories/PM/">PM</a><span> / </span><a class="link-muted" href="/blog/categories/PM/System/">System</a></span><span class="level-item">8분안에 읽기 (약 1160 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/2019/10/27/ScriptRunner-Label/">ScriptRunner Label 다루기</a></h1><div class="content"><p>스크립트러너에서 Jira 이슈의 Label 값을 수정하는 경우가 종종 있는데 어떻게 추가&#x2F;수정하는지<br>이번 포스트에서 다뤄보겠습니다.</p><p>이번에도 Script Console에서 코드를 실행시켜보고 저는 어떤 케이스에서 사용하는지 설명드리겠습니다.</p><h2 id="시스템-테스트-환경"><a href="#시스템-테스트-환경" class="headerlink" title="시스템 테스트 환경"></a>시스템 테스트 환경</h2><p>스크립트러너는 Jira 버전에 영향을 좀 받아서 환경도 미리 알고 계셔야합니다.<br>(버전에 따라 내부 함수들이 변경됨에 따라 실제 코드도 조금씩 변경됩니다)</p><ul><li>Jira: Jira Software 8.3.2</li><li>ScriptRunner: 5.6.1.1-jira8</li></ul><h2 id="Label-값-가져오기"><a href="#Label-값-가져오기" class="headerlink" title="Label 값 가져오기"></a>Label 값 가져오기</h2><p>Label 값을 가져오는 것은 쉽습니다.<br>이슈에서 기본적으로 사용하는 필드라서 다루기 쉬운 것이 장점입니다.</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.atlassian.jira.component.ComponentAccessor;</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.issue.label.LabelManager;</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.issue.MutableIssue;</span><br><span class="line"></span><br><span class="line">LabelManager labelManager = ComponentAccessor.getComponent(LabelManager);</span><br><span class="line"><span class="keyword">def</span> issueMgr = ComponentAccessor.getIssueManager();</span><br><span class="line">MutableIssue issue = issueMgr.getIssueObject(<span class="string">&quot;PUBGTEST-169&quot;</span>);</span><br><span class="line"></span><br><span class="line">labelManager.getLabels(issue.getId());</span><br></pre></td></tr></table></figure><h3 id="getLabels-Long-issueId"><a href="#getLabels-Long-issueId" class="headerlink" title="getLabels(Long issueId)"></a>getLabels(Long issueId)</h3><p>getLabels() 함수는 issueId 값을 받아 이슈의 label 값을 가져옵니다.<br>함수의 리턴 값은 label들을 포함한 배열로 리턴합니다.<br>(아래 결과 값은 이슈에 테스트로 Label 값을 입력한 것을 기반으로 스크립트 결과가 나온 것입니다.)</p><p><strong>Result</strong></p><blockquote><p>[Promotion, art]</p></blockquote><h2 id="Label-값-추가하기"><a href="#Label-값-추가하기" class="headerlink" title="Label 값 추가하기"></a>Label 값 추가하기</h2><p>Label 값을 가져오는 것보다는 한가지 더 고려가 필요한 <code>추가</code> 입니다.<br>Label 값을 추가할 때에는 어떤 사용자가 값을 추가할 것인지 결정이 필요합니다.<br>먼저 코드를 보면서 설명을 드리겠습니다.</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.atlassian.jira.component.ComponentAccessor;</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.issue.label.LabelManager;</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.issue.MutableIssue;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">def</span> user = ComponentAccessor.getUserManager().getUserByKey(<span class="string">&quot;pubg-helper&quot;</span>);</span><br><span class="line">LabelManager labelManager = ComponentAccessor.getComponent(LabelManager);</span><br><span class="line"><span class="keyword">def</span> issueMgr = ComponentAccessor.getIssueManager();</span><br><span class="line">MutableIssue issue = issueMgr.getIssueObject(<span class="string">&quot;PUBGTEST-169&quot;</span>);</span><br><span class="line"></span><br><span class="line">labelManager.addLabel(user, issue.getId(), <span class="string">&#x27;test&#x27;</span>, <span class="literal">false</span>);</span><br><span class="line">labelManager.getLabels(issue.getId());</span><br></pre></td></tr></table></figure><h3 id="코드-설명"><a href="#코드-설명" class="headerlink" title="코드 설명"></a>코드 설명</h3><p>앞서 Label 값을 가져오는 것과 비교해서 달라진 것은 아래 코드와 <code>addLabel()</code> 함수 입니다.<br><code>def user = ComponentAccessor.getUserManager().getUserByKey(&quot;pubg-helper&quot;);</code><br>위 코드는 Label을 추가할 사용자를 결정하기 위해 사용자 객체를 아이디로 가져온 것입니다.</p><p>ScriptRunner의 Listener 기능에서 Label 수정&#x2F;추가 기능을 사용할 때,<br>위 코드를 통해 업데이트하는 사용자를 동적으로 변경할 수 있습니다.</p><p>addLabel(User remoteUser, Long issueId, String label, boolean sendNotification) 함수는 이슈에 Label을 하나 추가할 수 있는 함수입니다.<br>함수 레퍼런스: <a target="_blank" rel="noopener" href="https://docs.atlassian.com/DAC/javadoc/jira/reference/com/atlassian/jira/issue/label/LabelManager.html#addLabel(com.atlassian.crowd.embedded.api.User,%20java.lang.Long,%20java.lang.String,%20boolean)">docs.atlassian.com&#x2F;…&#x2F;LabelManager&#x2F;addLabel</a></p><p><strong>Result</strong></p><blockquote><p>[Promotion, art, test]</p></blockquote><h2 id="Label-값-변경"><a href="#Label-값-변경" class="headerlink" title="Label 값 변경"></a>Label 값 변경</h2><p>앞서 Label 추가의 경우 하나씩 추가했던 것에 비해 Label 값을 변경하는 것은 LabelManager의 setLabels() 함수를 사용합니다.</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.atlassian.jira.component.ComponentAccessor;</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.issue.label.LabelManager;</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.issue.MutableIssue;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">def</span> user = ComponentAccessor.getUserManager().getUserByKey(<span class="string">&quot;pubg-helper&quot;</span>);</span><br><span class="line">LabelManager labelManager = ComponentAccessor.getComponent(LabelManager);</span><br><span class="line"><span class="keyword">def</span> issueMgr = ComponentAccessor.getIssueManager();</span><br><span class="line">MutableIssue issue = issueMgr.getIssueObject(<span class="string">&quot;PUBGTEST-169&quot;</span>);</span><br><span class="line"></span><br><span class="line">labelManager.setLabels(user, issue.getId(), [<span class="string">&#x27;test&#x27;</span>] <span class="keyword">as</span> Set, <span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line">labelManager.getLabels(issue.getId());</span><br></pre></td></tr></table></figure><h3 id="labelManager-setLabels"><a href="#labelManager-setLabels" class="headerlink" title="labelManager.setLabels()"></a>labelManager.setLabels()</h3><p>labelManager.setLabels() 함수는 Label 값을 추가, 삭제한다기보다는<br>새로운 값으로 <code>재설정</code>한다는 것으로 이해하시면 될 것 같습니다.</p><p><code>public Set&lt;Label&gt; setLabels (User remoteUser, Long issueId, Set&lt;String&gt; labels, boolean sendNotification, boolean causeChangeNotification)</code></p><p>여기서 중간에 labels 값에 Set으로 되어있는데 그냥 [] 배열로 넣을 경우 List 객체로 인식하는 문제가 생깁니다.<br>그래서 <code>as Set</code>으로 변경해준 것으로 이해해주시면 됩니다. (혹은 변수를 따로 Set으로 두고 입력하면 됩니다)</p><p>labelManager.setLabels() 함수 레퍼런스: <a target="_blank" rel="noopener" href="https://docs.atlassian.com/DAC/javadoc/jira/reference/com/atlassian/jira/issue/label/LabelManager.html#setLabels(com.atlassian.crowd.embedded.api.User,%20java.lang.Long,%20java.util.Set%3Cjava.lang.String%3E,%20boolean,%20boolean)">docs.atlassian.com&#x2F;…&#x2F;LabelManager&#x2F;setLabels</a></p><p><strong>Result</strong></p><blockquote><p>[test]</p></blockquote><h2 id="마무리"><a href="#마무리" class="headerlink" title="마무리"></a>마무리</h2><p>Label 값을 가져오고 추가&#x2F;설정하는 것은 어렵지 않은 것 같습니다. (커스텀 필드 수정에 비해서요)<br>다만 골라서 삭제하는 기능은 없어 setLabels와 기존에 있는 값을 비교해서 삭제하는 것으로 삭제할 수는 있어 보이네요. (그렇게 어려워 보이지는 않을 것 같긴 하네요.)</p><p>저는 특정 이벤트가 발생할 경우 Label을 추가하는 정도로만 Listener에 Custom Listener를 추가하여 사용하고 있습니다. 이 Label을 사용하여 보드를 만들어 사용하시는 분이 있는데 잘 사용하고 있다고 하네요. :)</p><p>다음에 다른 기능을 소개하는 포스트로 찾아뵙겠습니다.<br>감사합니다!</p></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2019-10-12T07:08:45.000Z" title="2019. 10. 12. 오후 4:08:45">2019-10-12</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2022-01-16T07:25:40.756Z" title="2022. 1. 16. 오후 4:25:40">2022-01-16</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/blog/categories/PM/">PM</a><span> / </span><a class="link-muted" href="/blog/categories/PM/System/">System</a></span><span class="level-item">9분안에 읽기 (약 1287 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/2019/10/12/ScriptRunner-Custom-Field/">ScriptRunner: Custom Field 다루기</a></h1><div class="content"><p>스크립트러너에서 Jira 이슈의 커스텀 필드를 다루는 경우가 많습니다.<br>저는 어떻게 스크립트러너에서 커스텀 필드의 값을 가져오고, 수정하고 있는지 다뤄보겠습니다.</p><h2 id="ScriptRunner란-복습"><a href="#ScriptRunner란-복습" class="headerlink" title="ScriptRunner란? (복습)"></a>ScriptRunner란? (복습)</h2><p>기존에 있는 포스트를 보시면 좋을 것 같습니다.<br>그중에 2번째 포스트에서 설명했던 <code>Script Console</code>에서 실습해보겠습니다.</p><ul><li><a href="/blog/2019/04/21/scriptrunner1/" title="ScriptRunner 소개 1">ScriptRunner 소개 1</a></li><li><strong><a href="/blog/2019/04/21/scriptrunner2/" title="ScriptRunner 소개 2">ScriptRunner 소개 2</a></strong></li><li><a href="/blog/2019/04/27/scriptrunner3/" title="ScriptRunner 소개 3">ScriptRunner 소개 3</a></li><li><a href="/blog/2019/05/11/scriptrunner4/" title="ScriptRunner 소개 4">ScriptRunner 소개 4</a></li></ul><h2 id="시스템-테스트-환경"><a href="#시스템-테스트-환경" class="headerlink" title="시스템 테스트 환경"></a>시스템 테스트 환경</h2><p>스크립트러너는 jira 버전에 영향을 좀 받아서 환경도 미리 알고 계셔야합니다.<br>(버전에 따라 내부 함수들이 변경됨에 따라 실제 코드도 조금씩 변경됩니다)</p><ul><li>Jira: Jira Software 8.3.2</li><li>ScriptRunner: 5.6.1.1-jira8</li></ul><h2 id="커스텀-필드-Custom-Field-값-가져오기"><a href="#커스텀-필드-Custom-Field-값-가져오기" class="headerlink" title="커스텀 필드(Custom Field) 값 가져오기"></a>커스텀 필드(Custom Field) 값 가져오기</h2><p>간단하게 <code>커스텀 필드</code> 값을 가져오는 코드를 보면서 설명하겠습니다.<br>코드는 groovy로 작성하며 Script Console에서 테스트해보았습니다.</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import</span></span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.component.ComponentAccessor;</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.issue.MutableIssue;</span><br><span class="line"></span><br><span class="line"><span class="comment">// functions</span></span><br><span class="line">String getCustomFieldValue(MutableIssue issue, String cfName) &#123;</span><br><span class="line">  <span class="keyword">def</span> customFieldManager = ComponentAccessor.getCustomFieldManager();</span><br><span class="line">  <span class="keyword">def</span> cfObj = customFieldManager.getCustomFieldObjectsByName(cfName)[<span class="number">0</span>];</span><br><span class="line">  String cfValue = issue.getCustomFieldValue(cfObj);</span><br><span class="line">  <span class="keyword">return</span> cfValue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> issueMgr = ComponentAccessor.getIssueManager();</span><br><span class="line">MutableIssue issue = issueMgr.getIssueObject(<span class="string">&quot;PUBGTEST-169&quot;</span>);</span><br><span class="line">getCustomFieldValue(issue, <span class="string">&quot;Translation&quot;</span>);</span><br></pre></td></tr></table></figure><p>복사 &amp; 붙여넣기 하시고 <code>이슈 키</code>, <code>커스텀 필드 이름</code>만 바꿔서 입력해주시면<br>해당 이슈의 커스텀 필드 값을 가져올 수 있는 코드입니다.<br>코드에서 중요한 부분만 간단하게 보고 커스텀 필드 값 수정으로 넘어가겠습니다.</p><h3 id="getCustomFieldValue-issue-cfName-함수"><a href="#getCustomFieldValue-issue-cfName-함수" class="headerlink" title="getCustomFieldValue(issue, cfName) 함수"></a>getCustomFieldValue(issue, cfName) 함수</h3><p><code>이슈 오브젝트</code>와 <code>커스텀 필드 이름</code>을 받아 커스텀 필드 값을 반환하는 함수입니다.</p><ol><li>CustomFieldManager를 사용하여 커스텀 필드 오브젝트를 가져옵니다.</li></ol><ul><li>배열로 가져오는 함수(<code>getCustomFieldObjectsByName()</code>)를 사용하였습니다.</li><li><code>getCustomFieldObjectByName()</code>도 있지만 배열로 가져오는 함수를 권장하고 있습니다.</li><li>같은 이름의 커스텀 필드가 있을 수 있기에 배열로 가져오는 함수를 권장하는 것 같네요.</li></ul><ol start="2"><li>issue에 있는 함수 <code>getCustomFieldValue()</code>로 커스텀 필드 오브젝트를 이용해 커스텀 필드 값을 가져옵니다.</li><li>커스텀 필드 값을 리턴합니다.</li></ol><h3 id="코드-실행-결과"><a href="#코드-실행-결과" class="headerlink" title="코드 실행 결과"></a>코드 실행 결과</h3><p>Script Console 실행 결과도 보여드리겠습니다.</p><p><img src="https://user-images.githubusercontent.com/5077086/66697493-18559680-ed11-11e9-944b-86f4686b1e63.png"></p><p>콘솔에서는 코드 실행 후 마지막에 있는 오브젝트의 값을 보여줍니다.<br>log에서 출력한 내용은 logs 탭에서 볼 수 있습니다.</p><h2 id="커스텀-필드-Custom-Field-값-수정하기"><a href="#커스텀-필드-Custom-Field-값-수정하기" class="headerlink" title="커스텀 필드(Custom Field) 값 수정하기"></a>커스텀 필드(Custom Field) 값 수정하기</h2><p>커스텀 필드의 값을 확인했으니 수정도 해볼 수 있어야겠죠?!<br>값을 가져오는 것보다 코드가 조금 더 추가됩니다.</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import</span></span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.event.type.EventDispatchOption</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.component.ComponentAccessor;</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.issue.MutableIssue;</span><br><span class="line"></span><br><span class="line"><span class="comment">// functions</span></span><br><span class="line">String getCustomFieldValue(MutableIssue issue, String cfName) &#123;</span><br><span class="line">  <span class="keyword">def</span> customFieldManager = ComponentAccessor.getCustomFieldManager();</span><br><span class="line">  <span class="keyword">def</span> cfObj = customFieldManager.getCustomFieldObjectsByName(cfName)[<span class="number">0</span>];</span><br><span class="line">  String cfValue = issue.getCustomFieldValue(cfObj);</span><br><span class="line">  <span class="keyword">return</span> cfValue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">def</span> setCustomFieldValue(MutableIssue issue, String cfName, String str) &#123;</span><br><span class="line">  <span class="keyword">def</span> issueMgr = ComponentAccessor.getIssueManager();</span><br><span class="line">  <span class="keyword">def</span> customFieldManager = ComponentAccessor.getCustomFieldManager();</span><br><span class="line">  <span class="keyword">def</span> user = ComponentAccessor.getJiraAuthenticationContext().getLoggedInUser();</span><br><span class="line">  <span class="keyword">def</span> cfObj = customFieldManager.getCustomFieldObjectsByName(cfName)[<span class="number">0</span>];</span><br><span class="line">  issue.setCustomFieldValue(cfObj, str);</span><br><span class="line">  issueMgr.updateIssue(user, issue, EventDispatchOption.DO_NOT_DISPATCH, <span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> issueMgr = ComponentAccessor.getIssueManager();</span><br><span class="line">MutableIssue issue = issueMgr.getIssueObject(<span class="string">&quot;PUBGTEST-169&quot;</span>);</span><br><span class="line">setCustomFieldValue(issue, <span class="string">&quot;Translation&quot;</span>, <span class="string">&quot;TEST&quot;</span>);</span><br><span class="line">getCustomFieldValue(issue, <span class="string">&quot;Translation&quot;</span>);</span><br></pre></td></tr></table></figure><p>앞서 값을 가져오는 코드와 마찬가지로 “TEST”에 있는 값을 바꾸면 적용해보실 수 있습니다.<br>다만 주의하실 점은 커스텀 필드의 타입이 텍스트 타입이어야합니다.<br>Label, Checkbox 등 다른 타입일 경우에는 <strong>동작하지 않는</strong> 코드입니다.</p><h3 id="setCustomFieldValue-issue-cfName-str"><a href="#setCustomFieldValue-issue-cfName-str" class="headerlink" title="setCustomFieldValue(issue, cfName, str)"></a>setCustomFieldValue(issue, cfName, str)</h3><p>값을 가져오는 코드와 다른 부분만 설명드리겠습니다.</p><ul><li>issueMgr: 이슈 매니저로 이슈 업데이트를 위해 함수 내에 선언합니다.</li><li>usr: 이슈 업데이트를 하려면 업데이트하는 사용자 오브젝트가 필요하여 선언합니다.</li><li>issue.setCustomFieldValue(cfObj, str);<ul><li>이 함수를 통해 커스텀 필드 값이 변경됩니다.</li><li>이 코드만 실행할 경우, 실제 반영은 되지 않습니다. (함수 동작시에만 변경됨)</li></ul></li><li>issueMgr.updateIssue()<ul><li>이 함수를 통해 앞에서 setCustomFieldValue()에서 변경된 내용이 반영됩니다.</li></ul></li></ul><p>커스텀 필드 수정과 관련한 질문은 Google에 검색만 하더라도 많이 나옵니다.<br>(첫번째 글을 보시는 것을 추천합니다.)</p><ul><li><a target="_blank" rel="noopener" href="https://community.atlassian.com/t5/Jira-questions/Set-custom-field-value-Script-Runner/qaq-p/1042485">community.atlassian.com&#x2F;Set-custom-field-value-Script-Runner</a></li><li><a target="_blank" rel="noopener" href="https://community.atlassian.com/t5/Marketplace-Apps-Integrations/Basic-method-to-update-a-custom-field-with-Scriptrunner/qaq-p/362875">community.atlassian.com&#x2F;Basic-method-to-update-a-custom-field-with-Scriptrunner</a></li></ul><h3 id="코드-실행-결과-1"><a href="#코드-실행-결과-1" class="headerlink" title="코드 실행 결과"></a>코드 실행 결과</h3><p><img src="https://user-images.githubusercontent.com/5077086/66698085-edba0c80-ed15-11e9-9199-5ea5e16afde5.png"></p><p>실제로 TEST로 변경된 것을 볼 수 있습니다.</p><h2 id="마무리"><a href="#마무리" class="headerlink" title="마무리"></a>마무리</h2><p>이렇게 스크립트러너로 Jira 이슈의 커스텀 필드를 다뤄보았습니다.<br>처음에는 어려울 수 있지만 조금씩 다뤄보면 그렇게 어렵지 않습니다.<br>쉽게 따라하고 적용해보실 수 있는 내용으로 추가 포스트해보겠습니다.</p><p>감사합니다. :)</p></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2019-06-24T14:01:44.000Z" title="2019. 6. 24. 오후 11:01:44">2019-06-24</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2022-01-16T07:25:40.764Z" title="2022. 1. 16. 오후 4:25:40">2022-01-16</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/blog/categories/PM/">PM</a></span><span class="level-item">9분안에 읽기 (약 1333 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/2019/06/24/jira-8-0-scriptRunner/">Jira 8.0 &amp; ScriptRunner로 JQL issue 가져오기</a></h1><div class="content"><h2 id="Jira-8-0-amp-ScriptRunner로-JQL-issue-가져오기"><a href="#Jira-8-0-amp-ScriptRunner로-JQL-issue-가져오기" class="headerlink" title="Jira 8.0 &amp; ScriptRunner로 JQL issue 가져오기"></a>Jira 8.0 &amp; ScriptRunner로 JQL issue 가져오기</h2><p>최근에 <code>ScriptRunner로 JQL 결과 이슈 가져오기</code> 스크립트를 찾아보고 실행해보려 했는데 잘 안되서 포스트를 작성해보았습니다.<br>(다른분들도 같은 문제를 겪을 것 같아서..!)</p><p>스크립트러너 문서에서의 코드는 링크에서 확인하시면 좋을 것 같습니다.<br><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/5.5.6/jira/recipes/misc/running-a-jql-query.html">ScriptRunner Doc: running-a-jql-query</a></p><p>위 링크에 있는 코드에서 몇몇 Deprecated 코드를 수정하면 다음과 같은 코드로 정리해볼 수 있습니다.</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.atlassian.jira.component.ComponentAccessor;</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.issue.search.SearchProvider;</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.jql.parser.JqlQueryParser;</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.web.bean.PagerFilter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> jqlQueryParser = ComponentAccessor.getComponent(JqlQueryParser);</span><br><span class="line"><span class="keyword">def</span> searchProvider = ComponentAccessor.getComponent(SearchProvider);</span><br><span class="line"><span class="keyword">def</span> issueManager = ComponentAccessor.getIssueManager();</span><br><span class="line"><span class="keyword">def</span> user = ComponentAccessor.getJiraAuthenticationContext().getLoggedInUser();</span><br><span class="line"></span><br><span class="line"><span class="comment">// edit this query to suit</span></span><br><span class="line"><span class="keyword">def</span> query = jqlQueryParser.parseQuery(<span class="string">&quot;project = JRA and assignee = currentUser()&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> results = searchProvider.search(query, user, PagerFilter.getUnlimitedFilter());</span><br><span class="line"></span><br><span class="line">log.debug(<span class="string">&quot;Total issues: $&#123;results.total&#125;&quot;</span>);</span><br><span class="line"></span><br><span class="line">results.getIssues().each &#123;documentIssue -&gt;</span><br><span class="line">  log.debug(documentIssue.key);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// if you need a mutable issue you can do:</span></span><br><span class="line">  <span class="keyword">def</span> issue = issueManager.getIssueObject(documentIssue.id);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// do something to the issue...</span></span><br><span class="line">  log.debug(issue.summary);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="문제의-시작"><a href="#문제의-시작" class="headerlink" title="문제의 시작"></a>문제의 시작</h2><p>그런데..<br>이 코드를 Script Console에서 실행해보면 아래와 같은 에러가 발생합니다.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">groovy.lang.MissingMethodException: No signature of method: com.atlassian.jira.issue.search.providers.LuceneSearchProvider.search() is applicable for argument types: (com.atlassian.query.QueryImpl, com.atlassian.jira.user.DelegatingApplicationUser, com.atlassian.jira.web.bean.PagerFilter) values: [&#123;project &#x3D; &quot;JRA&quot;&#125; AND &#123;assignee &#x3D; currentUser()&#125;, pineoc(pineoc), ...]</span><br><span class="line">Possible solutions: search(com.atlassian.jira.issue.search.SearchQuery, com.atlassian.jira.web.bean.PagerFilter), search(com.atlassian.jira.issue.search.SearchQuery, com.atlassian.jira.web.bean.PagerFilter, java.util.Set), search(com.atlassian.jira.issue.search.SearchQuery, org.apache.lucene.search.Collector), each(groovy.lang.Closure)</span><br><span class="line">	at Script1071.run(Script1071.groovy:14)</span><br></pre></td></tr></table></figure><h3 id="에러를-요약해보자면"><a href="#에러를-요약해보자면" class="headerlink" title="에러를 요약해보자면.."></a>에러를 요약해보자면..</h3><ul><li>LuceneSearchProvider에 그런 메서드가 없다.</li><li><code>search(.issue.search.SearchQuery, .web.bean.PagerFilter)</code> 요런 형식이어야하는데</li><li><code>search(.query.QueryImpl, .user.DelegatingApplicationUser, .web.bean.PagerFilter)</code> 요렇게 부르고 있어서 안되는거다.</li><li>파라미터 형식이 너무 길어서 생략하겠습니다. (com.atlassian.jira 등이 앞에 붙어있었습니다.)</li></ul><p>에러 내용만 봤을 때는 잘못된 파라미터로 인해 함수를 호출하지 못한다고 합니다.<br>공식 가이드 문서로 보고 진행했는데 에러가 나서 잠시 당황했지만 파라미터를 확인해보았습니다.</p><h2 id="문제-파악"><a href="#문제-파악" class="headerlink" title="문제 파악"></a>문제 파악</h2><p><code>searchProvider</code>의 <code>search()</code> 함수에는 다음과 같은 파라미터가 들어가야한다고 합니다.<br><a target="_blank" rel="noopener" href="https://docs.atlassian.com/software/jira/docs/api/8.0.2/com/atlassian/jira/issue/search/providers/LuceneSearchProvider.html">JIRA API docs(8.0.2)-LuceneSearchProvider</a></p><ul><li>com.atlassian.jira.issue.search.SearchQuery</li><li>com.atlassian.jira.web.bean.PagerFilter</li></ul><p>근데 가이드 문서에서 사용했던 함수에는 아래와 같은 파라미터를 사용했습니다.<br><a target="_blank" rel="noopener" href="https://docs.atlassian.com/software/jira/docs/api/7.0.5/com/atlassian/jira/issue/search/providers/LuceneSearchProvider.html">JIRA API docs(7.0.5)-LuceneSearchProvider</a></p><ul><li>Query query</li><li>ApplicationUser searcher</li><li>PagerFilter pager</li></ul><p>위 처럼 찾아보는 과정에서 LuceneSearch 쪽 업데이트가 있어 함수 변경이 있었습니다.<br>그 업데이트가 Jira 8.0 버전으로 올라가면서 반영된 것 같습니다.<br>ScriptRunner는 Jira 8.0을 지원한다고 했지만 문서는 아직 지원하지 않는 것 같네요. (…)</p><h3 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h3><ul><li><a target="_blank" rel="noopener" href="https://confluence.atlassian.com/adminjira/lucene-upgrade-955171970.html">https://confluence.atlassian.com/adminjira/lucene-upgrade-955171970.html</a></li><li><a target="_blank" rel="noopener" href="https://confluence.atlassian.com/adminjira/preparing-for-jira-8-0-955171967.html#PreparingforJira8.0-m06">https://confluence.atlassian.com/adminjira/preparing-for-jira-8-0-955171967.html#PreparingforJira8.0-m06</a></li></ul><h2 id="문제-해결-시도"><a href="#문제-해결-시도" class="headerlink" title="문제 해결 시도"></a>문제 해결 시도</h2><p>그래도 결과를 찾아봐야하니까 문제를 해결해봅니다.</p><p>아래와 같이 코드를 수정하여 스크립트 콘솔에 적용해보았습니다.<br>변경된 내용 및 이유도 함께 적어둡니다.<br>(바로 적용해볼 수 있는 코드는 아래에 있으니 바로 사용해보시면 될 것 같습니다.)</p><ul><li>searchProvider.search() 함수도 앞서 설명한 것 처럼 메서드를 확인하여 변경했다.</li><li>results.getIssues() 함수는 Jira 8.0.x에 더 이상 존재하지 않았다.<ul><li>SearchResults에 함수에는 getResults() 함수가 존재한다.</li><li>getResults() 함수는 List를 반환하는데 DocumentWithId List를 반환한다. (<a target="_blank" rel="noopener" href="https://docs.atlassian.com/software/jira/docs/api/8.0.2/com/atlassian/jira/issue/search/DocumentWithId.html">참고 링크 - search 함수</a>)</li><li>DocumentWithId 클래스에는 getDocument() 함수가 있는데 이 함수로 Document에 접근할 수 있다.</li><li>Document 오브젝트는 org.apache.lucene.document.Document 메서드를 사용하여 데이터를 접근할 수 있다. (<a target="_blank" rel="noopener" href="https://lucene.apache.org/core/7_2_0/core/org/apache/lucene/document/Document.html">참고 링크 - Document 메서드</a>)</li><li>Document.getField(“key”) 로 접근하여 이슈의 키를 얻을 수 있다. (ex: JRA-1)</li></ul></li></ul><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.atlassian.jira.component.ComponentAccessor;</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.jql.parser.JqlQueryParser;</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.issue.search.SearchProvider;</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.web.bean.PagerFilter;</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.component.ComponentAccessor;</span><br><span class="line"><span class="keyword">import</span> com.atlassian.jira.issue.search.SearchQuery;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> findIssues(String jqlQuery) &#123;</span><br><span class="line">  <span class="keyword">def</span> issueManager = ComponentAccessor.issueManager;</span><br><span class="line">  <span class="keyword">def</span> user = ComponentAccessor.getJiraAuthenticationContext().getLoggedInUser();</span><br><span class="line">  <span class="keyword">def</span> jqlQueryParser = ComponentAccessor.getComponent(JqlQueryParser);</span><br><span class="line">  <span class="keyword">def</span> searchProvider = ComponentAccessor.getComponent(SearchProvider);</span><br><span class="line">  <span class="keyword">def</span> query = jqlQueryParser.parseQuery(jqlQuery);</span><br><span class="line">  <span class="keyword">def</span> searchQuery = SearchQuery.create(query, user);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// search 함수를 type 에 맞게 수정해주었다.</span></span><br><span class="line">  <span class="keyword">def</span> results = searchProvider.search(searchQuery, PagerFilter.getUnlimitedFilter());</span><br><span class="line">  log.warn <span class="string">&quot;issue cnt: $&#123;results.getTotal()&#125;&quot;</span>; <span class="comment">// query로 얻은 이슈의 수를 확인한다.</span></span><br><span class="line">  results.getResults().collect &#123; res -&gt;</span><br><span class="line">    <span class="keyword">def</span> doc = res.getDocument();</span><br><span class="line">    <span class="keyword">def</span> key = doc.get(<span class="string">&quot;key&quot;</span>);</span><br><span class="line">    <span class="keyword">def</span> issue = ComponentAccessor.getIssueManager().getIssueObject(key);</span><br><span class="line">    <span class="keyword">return</span> issue;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">def</span> jqlQuery = <span class="string">&quot;project=JRA AND issuetype=Bug&quot;</span>;</span><br><span class="line"><span class="keyword">def</span> issues = findIssues(jqlQuery);</span><br></pre></td></tr></table></figure><h3 id="참고-1"><a href="#참고-1" class="headerlink" title="참고"></a>참고</h3><ul><li>Document 클래스 설명 문서: <a target="_blank" rel="noopener" href="https://lucene.apache.org/core/7_2_0/core/index.html?org/apache/lucene/document/Document.html">https://lucene.apache.org/core/7_2_0/core/index.html?org/apache/lucene/document/Document.html</a></li><li>Document.getFields() 참고: <a target="_blank" rel="noopener" href="https://www.programcreek.com/java-api-examples/?class=org.apache.lucene.document.Document&amp;method=getFields">https://www.programcreek.com/java-api-examples/?class=org.apache.lucene.document.Document&amp;method=getFields</a></li><li>groovy Collection 다루기<a target="_blank" rel="noopener" href="http://docs.groovy-lang.org/next/html/documentation/working-with-collections.html">http://docs.groovy-lang.org/next/html/documentation/working-with-collections.html</a></li></ul><h2 id="정리"><a href="#정리" class="headerlink" title="정리"></a>정리</h2><p>다소 문제 해결에 애를 먹기는 했지만 해결은 했습니다.<br>이 글을 쓰고나서 ScriptRunner 쪽에 문서 최신화좀 해달라고 요청해야겠네요.<br>문서 최신화가 어려운 것은 알지만 다들 삽질할 것 같은데 피드백 얼른 남겨야겠네요.</p><p>종종 스크립트러너로 할 수 있는 기능들을 포스팅 해보겠습니다. :)</p></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2019-05-11T01:30:46.000Z" title="2019. 5. 11. 오전 10:30:46">2019-05-11</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2022-01-16T07:25:40.771Z" title="2022. 1. 16. 오후 4:25:40">2022-01-16</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/blog/categories/PM/">PM</a><span> / </span><a class="link-muted" href="/blog/categories/PM/System/">System</a></span><span class="level-item">6분안에 읽기 (약 952 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/2019/05/11/scriptrunner4/">ScriptRunner 소개 4</a></h1><div class="content"><h2 id="ScriptRunner-소개-4"><a href="#ScriptRunner-소개-4" class="headerlink" title="ScriptRunner 소개 #4"></a>ScriptRunner 소개 #4</h2><ul><li><a href="/blog/2019/04/21/scriptrunner1/" title="ScriptRunner 소개 1">ScriptRunner 소개 1</a></li><li><a href="/blog/2019/04/21/scriptrunner2/" title="ScriptRunner 소개 2">ScriptRunner 소개 2</a></li><li><a href="/blog/2019/04/27/scriptrunner3/" title="ScriptRunner 소개 3">ScriptRunner 소개 3</a></li><li><strong><a href="/blog/2019/05/11/scriptrunner4/" title="ScriptRunner 소개 4">ScriptRunner 소개 4</a></strong></li></ul><p>지난 #3 소개 글에서는 Script Fragments 기능까지 보았습니다.<br>얼마 남지 않았지만 너무 길어져서 #4로 나눴습니다.</p><ul><li>Escalation Services</li><li>Script JQL Functions</li></ul><p>길고 길었던 ScriptRunner 소개를 마무리하러 가보겠습니다! :)</p><h2 id="Escalation-Services"><a href="#Escalation-Services" class="headerlink" title="Escalation Services"></a>Escalation Services</h2><p><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/latest/jira/escalation-service.html">https://scriptrunner.adaptavist.com/latest/jira/escalation-service.html</a><br>설명은 아래와 같이 나와있는데 요약해보겠습니다.</p><blockquote><p>Automate issue escalation with escalation services. Use a JQL query to define processes for modifying issues based on elapsed time. Specify actions (such as transitions) to occur at defined intervals after a specified time has passed.</p></blockquote><blockquote><p>에스컬레이션 서비스를 통해 문제 에스컬레이션 자동화 JQL 쿼리를 사용하여 경과된 시간을 기준으로 문제를 수정하는 프로세스를 정의하십시오. 지정된 시간이 경과한 후 정의된 간격으로 발생할 작업(예: 전환)을 지정하십시오. - with Papago</p></blockquote><p>JQL로 검색한 쿼리들을 일정 시간마다 특정 값을 설정하거나 transition(전환) 할 수 있는 기능입니다.<br>예를 들면, 2주 동안 변경이 없는 이슈들의 상태를 변경할 수 있겠죠. (혹은 특정 필드를 수정하거나)</p><p><img src="https://user-images.githubusercontent.com/5077086/57563668-59045900-73db-11e9-89fc-0eaf749e1ac4.png"><br>입력해야하는 항목은 아래와 같이 많지 않습니다.</p><ul><li>Description: 설정에 대한 설명을 적습니다.</li><li>JQL Query: 변경하고자하는 이슈를 가져오기 위해 JQL을 작성합니다.</li><li>AS User: 어떤 유저로 변경할 것인지 설정합니다.</li><li>Interval&#x2F;CRON Expression: 얼마나 자주 실행할 것인지 설정합니다. 기본적으로 분 단위로 설정할 수 있습니다.<ul><li>CRON Expression에 대한 것은 <a target="_blank" rel="noopener" href="https://crontab.guru/">링크</a>에서 참고하여 작성해볼 수 있습니다.</li></ul></li><li>Action: Transition을 설정할 수 있습니다. 반드시 설정해야하는 항목은 아닙니다.</li><li>Additional issue actions: 댓글을 달거나 Resolution을 설정할 수 있습니다. groovy 코드로 작성해야합니다.<ul><li>Show examples를 보고 작성해보는 것을 추천합니다.</li></ul></li><li>Transition Options: Permissions, Validators, Conditions 확인하는 것을 건너뛸 것인지 설정합니다.</li></ul><p>수시로 확인해서 상태를 업데이트하거나 이슈의 항목을 수정해야하는 일이 있다면 사용하기 좋을 것 같습니다.<br>다만 As User로 설정한 유저의 권한을 잘 확인하여 transition할 수 있는 권한이 있는지 확인해주세요.<br>(방금 테스트해보았는데 권한없는 동작을 하려할 경우 아예 변경이 진행되지 않습니다.)</p><h2 id="Script-JQL-Functions"><a href="#Script-JQL-Functions" class="headerlink" title="Script JQL Functions"></a>Script JQL Functions</h2><p><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/latest/jira/jql-functions.html">https://scriptrunner.adaptavist.com/latest/jira/jql-functions.html</a><br>이 항목은 커스텀한 JQL 함수를 추가할 수 있다기 보다 현재 사용할 수 있는 JQL Function들을 보여줍니다.</p><p>커스텀한 함수를 추가할 수는 있지만 JIRA 페이지에서 바로 추가할 수 있지는 않습니다.<br><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/latest/jira/custom-jql-functions.html">https://scriptrunner.adaptavist.com/latest/jira/custom-jql-functions.html</a></p><p><img src="https://user-images.githubusercontent.com/5077086/57564512-c6b68200-73e7-11e9-8d67-b31c30b00467.png"><br>쭉 내려보면 많은 함수들을 볼 수 있습니다.<br>함수에 대한 더 자세한 내용을 보려면 위에 있는 jql-functions 링크를 참고하세요.</p><h2 id="ScriptRunner-소개-마무리"><a href="#ScriptRunner-소개-마무리" class="headerlink" title="ScriptRunner 소개 마무리"></a>ScriptRunner 소개 마무리</h2><p>4개의 포스트로 소개 문서를 마무리하고자 합니다.<br>많은 내용들을 찾아보고 테스트 삼아 만들어보느라 시간이 오래걸리기도 했네요.<br>설정하면서 많이 배웠고 실제 프로젝트에서도 적용해볼만한 내용들이 많았습니다.<br>다른 JIRA를 사용하는 분들께도 필요한 내용이 있으면 다른 포스트에서 짧게 사용할만한 것들<br>남겨두겠습니다. :)</p><p>긴 글 읽어주셔서 감사합니다. (_ _)</p></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2019-04-27T09:55:29.000Z" title="2019. 4. 27. 오후 6:55:29">2019-04-27</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2022-01-16T07:25:40.770Z" title="2022. 1. 16. 오후 4:25:40">2022-01-16</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/blog/categories/PM/">PM</a><span> / </span><a class="link-muted" href="/blog/categories/PM/System/">System</a></span><span class="level-item">26분안에 읽기 (약 3844 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/2019/04/27/scriptrunner3/">ScriptRunner 소개 3</a></h1><div class="content"><h2 id="ScriptRunner-소개-3"><a href="#ScriptRunner-소개-3" class="headerlink" title="ScriptRunner 소개 #3"></a>ScriptRunner 소개 #3</h2><ul><li><a href="/blog/2019/04/21/scriptrunner1/" title="ScriptRunner 소개 1">ScriptRunner 소개 1</a></li><li><a href="/blog/2019/04/21/scriptrunner2/" title="ScriptRunner 소개 2">ScriptRunner 소개 2</a></li><li><strong><a href="/blog/2019/04/27/scriptrunner3/" title="ScriptRunner 소개 3">ScriptRunner 소개 3</a></strong></li><li><a href="/blog/2019/05/11/scriptrunner4/" title="ScriptRunner 소개 4">ScriptRunner 소개 4</a></li></ul><p>지난 #2 소개 글에서는 Script Fields 기능까지 보았고<br>그 다음에 있는 아래 리스트의 기능들을 보겠습니다.</p><ul><li>REST Endpoints</li><li>Script Fragments</li><li>Escalation Services</li><li>Script JQL Functions</li></ul><p>소개 글을 쓰는 도중에 JIRA 시스템 버전이 7에서 8로 올라가는 과정에서 UI, 기능이 약간 변경되었습니다.<br>버전 변경에 따라 큰 차이는 없겠지만 참고해주세요. :)</p><ul><li>JIRA version: 7.13 -&gt; 8.0</li><li>ScriptRunner: 5.5.2 -&gt; 5.5.3</li></ul><h2 id="REST-Endpoints"><a href="#REST-Endpoints" class="headerlink" title="REST Endpoints"></a>REST Endpoints</h2><p><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/latest/jira/rest-endpoints.html">https://scriptrunner.adaptavist.com/latest/jira/rest-endpoints.html</a><br>ScriptRunner 공식 문서를 보면 아래와 같은 용도로 사용할 수 있다고 합니다.</p><ul><li>use in dashboard gadgets<ul><li>대시보드 가젯으로 사용</li></ul></li><li>receive notifications from external systems<ul><li>외부 시스템으로부터 알림 받기</li></ul></li><li>plug gaps in the official REST API<ul><li>공식 REST API 갭을 보완(매꾸기)</li></ul></li><li>allow all your XHRs to proxy through to other systems<ul><li>모든 XHR이 다른 시스템으로 프록시되도록 허용</li></ul></li></ul><p><img src="https://user-images.githubusercontent.com/5077086/57128456-711e1c00-6dce-11e9-9253-b7ad64ec8d89.png"></p><center>Create Rest Endpoint 버튼을 통해 만들 수 있습니다.</center><p><img src="https://user-images.githubusercontent.com/5077086/57128457-711e1c00-6dce-11e9-85d0-b33fa603de18.png"><br><img src="https://user-images.githubusercontent.com/5077086/57128458-711e1c00-6dce-11e9-8848-e45d9198624b.png"></p><p>위 화면처럼 inline script 입력 창에 코드를 입력하여 REST API를 구현합니다.<br>공식 문서와 Show examples에서는 <code>Simple &#39;get&#39;</code> 코드를 보여줍니다.</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.onresolve.scriptrunner.runner.rest.common.CustomEndpointDelegate</span><br><span class="line"><span class="keyword">import</span> groovy.json.JsonBuilder</span><br><span class="line"><span class="keyword">import</span> groovy.transform.BaseScript</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.ws.rs.core.MultivaluedMap</span><br><span class="line"><span class="keyword">import</span> javax.ws.rs.core.Response</span><br><span class="line"></span><br><span class="line"><span class="meta">@BaseScript</span> CustomEndpointDelegate delegate <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">doSomething( <span class="comment">// 2</span></span><br><span class="line">  <span class="symbol">httpMethod:</span> <span class="string">&quot;GET&quot;</span>, <span class="attr">groups:</span> [<span class="string">&quot;jira-administrators&quot;</span>]) &#123; <span class="comment">// 3</span></span><br><span class="line">    MultivaluedMap queryParams, String body -&gt; <span class="comment">// 4</span></span><br><span class="line">    <span class="keyword">return</span> Response.ok(<span class="keyword">new</span> JsonBuilder([<span class="attr">abc:</span> <span class="number">42</span>]).toString()).build(); <span class="comment">// 5</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>코드의 설명 내용은 <a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/5.5.3/jira/rest-endpoints.html#_adding_a_rest_endpoint">공식 문서</a>에 나와있으나 짧게 설명해보겠습니다. (영어로 되어있어 한국어로 설명할 겸..!)</p><ol><li>이 줄이 코드는 스크립트가 엔드포인트로 사용할 수 있도록 하는 코드입니다. 엔드포인트를 사용하고자 한다면 꼭 필요한 코드입니다.</li><li>REST 엔드포인트의 이름입니다. URL에서 사용할 이름으로 이 코드에서는 <code>doSomething</code>으로 사용될 것입니다.</li><li>엔드포인트의 설정으로 <code>HTTP GET</code>, 권한 그룹은 <code>jira-administrators</code> 그룹이 사용할 수 있는 엔드포인트가 됩니다.</li><li>메서드 바디에 제공될 파라미터 입니다.</li><li>작성된 값은 메서드 바디에 포함되어 <code>javax.ws.rs.core.Response</code> 객체를 반환할 것 입니다.</li></ol><p>이렇게 추가하게되면 아래의 링크에 접근하여 데이터를 받을 수 있습니다.<br><code>&lt;jira_base_url&gt;/rest/scriptrunner/latest/custom/doSomething</code><br>curl로 테스트해보면 아래와 같이 결과 값이 나올 수 있겠습니다.<br>(<code>admin:admin</code>는 username:password 값을 입력하면 됩니다.)</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; curl -u admin:admin http://localhost:8080/jira/rest/scriptrunner/latest/custom/doSomething</span><br><span class="line">&gt; &#123;<span class="string">&quot;abc&quot;</span>:42&#125;</span><br></pre></td></tr></table></figure><h3 id="예시"><a href="#예시" class="headerlink" title="예시"></a>예시</h3><p>예시: <a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/5.5.3/jira/rest-endpoints.html#_examples">ScriptRunner REST Endpoints Examples</a></p><ul><li>Create Priority Object</li><li>Get the user making the request</li></ul><p>문서에 코드도 같이 포함되어 있으니 링크 참고하셔서 설정하면 되겠습니다.<br>특정 URL로 요청해서 시스템 설정을 하거나 데이터를 가져오거나 할 수 있는 기능으로<br>REST Endpoints 소래를 마무리할 수 있겠습니다.</p><h2 id="Script-Fragments"><a href="#Script-Fragments" class="headerlink" title="Script Fragments"></a>Script Fragments</h2><p><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/latest/jira/CustomisingUI.html">https://scriptrunner.adaptavist.com/latest/jira/CustomisingUI.html</a><br>설정화면에 있는 설명을 그대로 가져와보겠습니다.</p><blockquote><p>Use script fragments to customise the user interface and add new functionality to a Jira instance. Use customisable built-in script fragments to display web items, web panels and web sections or to include JavaScript and CSS resources using web resources. All script fragments can be customised, or use the raw XML module to create a fully custom web fragment.</p></blockquote><p>간단히 설명하자면 필요한 Web items, panels, section을 만들 수 있다는 것입니다.<br>XML 설정이나 다른 리소스가 필요할 수는 있으나 팝업, 패널 등을 사용자가 원하는대로 만들 수 있는 기능입니다.</p><p><img src="https://user-images.githubusercontent.com/5077086/56850463-12742080-693e-11e9-84f0-296f0a1b0b78.png"><br><img src="https://user-images.githubusercontent.com/5077086/56850466-19029800-693e-11e9-91f5-6e4fadccdf66.png"></p><p>설정을 할 수 있는 메뉴를 하나하나 알아보겠습니다.</p><h3 id="Raw-xml-module"><a href="#Raw-xml-module" class="headerlink" title="Raw xml module"></a>Raw xml module</h3><p><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/5.5.3.1-jira8/jira/fragments/XmlModuleItem.html">XmlModuleItem Docs</a><br>xml 코드를 입력하여 원하는 위치에 메뉴를 보여주거나, 버튼들을 보여줄 수 있습니다.<br>아래 코드로 JIRA 상단 메뉴의 Projects &gt; View all projects &gt; <code>My Projects</code>를 볼 수 있습니다.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">web-item</span> <span class="attr">key</span>=<span class="string">&#x27;link-to-myprojects&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;ScriptRunner generated web item - link-to-myprojects&#x27;</span> <span class="attr">section</span>=<span class="string">&#x27;browse_link/project_view_all&#x27;</span> <span class="attr">weight</span>=<span class="string">&#x27;50&#x27;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span>My Projects<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">linkId</span>=<span class="string">&#x27;link-to-myprojects&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tooltip</span>&gt;</span>Show only my projects<span class="tag">&lt;/<span class="name">tooltip</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">icon</span> <span class="attr">height</span>=<span class="string">&quot;16&quot;</span> <span class="attr">width</span>=<span class="string">&quot;16&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span>&gt;</span>/images/icons/print.gif<span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">icon</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-item</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://scriptrunner.adaptavist.com/5.5.3.1-jira8/common/fragments/image/xml.png"></p><p>XML 입력창에 입력만 하면 되긴 하지만 JIRA UI 아이템들이 어떻게 배치되어있는지<br>알고 작성해야하는 것이 어렵긴합니다.</p><p><code>section</code>에 <code>system.top.navigation.bar</code>이 있는지, <code>&lt;web-item&gt;</code> 태그가 있는지 알기 쉽지 않지만<br>일단 예제로 따라해보고 다른 web-item, web-section 등의 태그를 알아가야할 것 같습니다.</p><h4 id="참고-외부-링크"><a href="#참고-외부-링크" class="headerlink" title="참고 외부 링크"></a>참고 외부 링크</h4><ul><li>Jira Server Developer (Web Item): <a target="_blank" rel="noopener" href="https://developer.atlassian.com/server/jira/platform/web-item/">https://developer.atlassian.com/server/jira/platform/web-item/</a></li><li>Jira Server Developer (Web Section): <a target="_blank" rel="noopener" href="https://developer.atlassian.com/server/jira/platform/web-section/">https://developer.atlassian.com/server/jira/platform/web-section/</a></li></ul><h3 id="Install-web-resource"><a href="#Install-web-resource" class="headerlink" title="Install web resource"></a>Install web resource</h3><p><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/5.5.3.1-jira8/jira/fragments/WebResource.html">Web Resource Docs</a><br>이 기능은 Javascript, CSS 리소스를 사용할 수 있도록 하는 기능입니다.<br>우선 설정을 하려면 아래와 같이 환경 설정을 해야합니다. (경로는 다를 수 있습니다.)</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JVM_REQUIRED_ARGS=<span class="string">&#x27;-Dplugin.resource.directories=/app/home/scripts -Dother.properties...&#x27;</span></span><br></pre></td></tr></table></figure><p>설정 후, 해당 폴더에 JS, CSS를 넣고 Resouces 입력창에 경로를 넣어줍니다.</p><p><img src="https://scriptrunner.adaptavist.com/5.5.3.1-jira8/jira/fragments/image/web-resource.png"></p><p>커스텀한 리소스를 사용할 수 있다는 점에서는 좋은 것 같지만<br>잘못하면 많이 망가질 수 있다는 생각이 들긴하는 기능입니다.</p><h3 id="Create-a-custom-web-section"><a href="#Create-a-custom-web-section" class="headerlink" title="Create a custom web section"></a>Create a custom web section</h3><p><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/5.5.3.1-jira8/jira/fragments/WebSection.html">Web Section Docs</a><br>웹 섹션(Web section)은 새로운 로케이션 또는 섹션, web-item을 추가할 때 사용할 수 있습니다.</p><p>web-item에서 web-section을 사용하고자 한다면,<br>web-section 만들 때 사용했던 <code>key</code> 값을 사용해야합니다.</p><h3 id="Constrained-create-issue-dialog"><a href="#Constrained-create-issue-dialog" class="headerlink" title="Constrained create issue dialog"></a>Constrained create issue dialog</h3><p><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/5.5.3.1-jira8/jira/fragments/CreateConstrainedIssue.html">Create Constrained Issue</a><br>문서 설명 그대로 가져오자면, <code>Create Constrained Issue</code> -&gt; 제한된 문제 만들기!<br>제한된 설정 안에서 이슈를 만들 수 있도록 설정할 수 있습니다.</p><p>문서에 나온 설명에 따르면,</p><blockquote><p>This can be useful to workflow designers. Imagine a workflow where at one transition the user is required to create a new linked issue. Typically this is done by having a self or any to any transition which will created the linked issue with a post-function. Then the user is required to edit the linked issue further.</p></blockquote><p>Workflow를 디자인, 만들때 유용한 기능입니다.<br>예를 들면 특정 트랜지션에서 이슈를 링크해야한다던지, 특정 값을 입력해야하는 옵션을 추가할 수 있습니다.</p><p>문서에서는 <code>Behaviours</code>와 함께 사용해서 구성한 메뉴를 눌렀을 경우,<br>새로운 이슈를 만들때 특정 필드를 읽기전용으로 설정하고 필드 값도 미리 설정할 수 있는 것을 보여줍니다.</p><h4 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h4><p>이 기능은 설정할 내용이 좀 있어서 나중에 포스트로 깊게 다루는게 좋을 것 같습니다.</p><h3 id="Custom-web-item"><a href="#Custom-web-item" class="headerlink" title="Custom web item"></a>Custom web item</h3><p><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/5.5.3.1-jira8/jira/fragments/WebItem.html">Web Item</a><br>A web-item is a button or link that will appear at your chosen location.<br>웹 아이템은 버튼 또는 링크로 설정한 위치에서 메뉴로 사용할 수 있습니다.</p><p>간단한 예시로 JIRA 상단에 네비게이션 바에 <code>Search the Web</code> 링크를 만들어봅니다.</p><p><img src="https://scriptrunner.adaptavist.com/5.5.3.1-jira8/jira/fragments/image/link-to-google.png"></p><p>issue에서 <code>More Actions</code> 메뉴에도 링크를 만들어봅니다.<br><img src="https://scriptrunner.adaptavist.com/5.5.3.1-jira8/jira/fragments/image/page-link.png"></p><p>결과화면은 아래와 같이 나옵니다.<br><img src="https://scriptrunner.adaptavist.com/5.5.3.1-jira8/jira/fragments/image/tools-menu-link.png"></p><p>Condition 조건에 따라 웹 아이템이 나오기에 Condition 설정도 필요합니다.<br>프로젝트로 한정하거나 이슈의 특정 값인지 조건을 사용할 수 있습니다.</p><p>차근차근 테스트 삼아 저도 웹 아이템 하나 만들어보겠습니다.</p><h4 id="1-web-item을-하나-만들어봅니다"><a href="#1-web-item을-하나-만들어봅니다" class="headerlink" title="1. web-item을 하나 만들어봅니다."></a>1. web-item을 하나 만들어봅니다.</h4><p><img src="https://user-images.githubusercontent.com/5077086/57125596-fac8ec00-6dc4-11e9-8434-39e1e4ba3f3e.png"></p><ul><li>Menu text는 버튼에 들어갈 텍스트니 적당히 적어줍니다.</li><li>Weight 값은 숫자가 작을수록 우선순위가 높습니다.</li><li>Condition 값은 어떤 조건에 버튼이 나올지 설정할 수 있습니다.</li><li>Do what에는 저는 dialog를 띄우는 테스트를 할 것이라 <code>Run code and display dialog</code>를 선택했습니다.</li><li>Link는 REST Endpoint 기능에서 만든 URL을 입력해줍니다. 다음 과정에서 만드는 방법을 보겠습니다.</li></ul><h4 id="2-REST-Endpoint-추가"><a href="#2-REST-Endpoint-추가" class="headerlink" title="2. REST Endpoint 추가"></a>2. REST Endpoint 추가</h4><p><img src="https://user-images.githubusercontent.com/5077086/57126172-f7cefb00-6dc6-11e9-9938-43a043b98243.png"></p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.onresolve.scriptrunner.runner.rest.common.CustomEndpointDelegate</span><br><span class="line"><span class="keyword">import</span> groovy.transform.BaseScript</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.ws.rs.core.MediaType</span><br><span class="line"><span class="keyword">import</span> javax.ws.rs.core.MultivaluedMap</span><br><span class="line"><span class="keyword">import</span> javax.ws.rs.core.Response</span><br><span class="line"></span><br><span class="line"><span class="meta">@BaseScript</span> CustomEndpointDelegate delegate</span><br><span class="line"></span><br><span class="line">showDialog &#123; MultivaluedMap queryParams -&gt;</span><br><span class="line">    <span class="keyword">def</span> dialog =</span><br><span class="line">        <span class="string">&quot;&quot;&quot;&lt;section role=&quot;dialog&quot; id=&quot;sr-dialog&quot; class=&quot;aui-layer aui-dialog2 aui-dialog2-medium&quot; aria-hidden=&quot;true&quot; data-aui-remove-on-hide=&quot;true&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;header class=&quot;aui-dialog2-header&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;h2 class=&quot;aui-dialog2-header-main&quot;&gt;Some dialog&lt;/h2&gt;</span></span><br><span class="line"><span class="string">                &lt;a class=&quot;aui-dialog2-header-close&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;span class=&quot;aui-icon aui-icon-small aui-iconfont-close-dialog&quot;&gt;Close&lt;/span&gt;</span></span><br><span class="line"><span class="string">                &lt;/a&gt;</span></span><br><span class="line"><span class="string">            &lt;/header&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&quot;aui-dialog2-content&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;p&gt;This is a dialog...&lt;/p&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;footer class=&quot;aui-dialog2-footer&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;div class=&quot;aui-dialog2-footer-actions&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;button id=&quot;dialog-close-button&quot; class=&quot;aui-button aui-button-link&quot;&gt;Close&lt;/button&gt;</span></span><br><span class="line"><span class="string">                &lt;/div&gt;</span></span><br><span class="line"><span class="string">                &lt;div class=&quot;aui-dialog2-footer-hint&quot;&gt;Some hint here if you like&lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;/footer&gt;</span></span><br><span class="line"><span class="string">        &lt;/section&gt;</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    Response.ok().type(MediaType.TEXT_HTML).entity(dialog.toString()).build()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>위 코드를 <code>inline script</code> 항목에 넣어줍니다.<ul><li>함수 이름으로 REST endpoint가 만들어질 것인데 <code>showDialog</code>로 만들어질 예정입니다.</li></ul></li><li>생성!</li><li>다시 Web-item 만든 곳으로 돌아가서 아래 주소를 입력해줍니다.<ul><li>&#x2F;rest&#x2F;scriptrunner&#x2F;latest&#x2F;custom&#x2F;showDialog</li><li>1번 단계에서 이미 이미지를 보고 입력하셨다면 함수 이름에 맞게 입력했는지 확인하면 끝!</li></ul></li></ul><h4 id="3-결과"><a href="#3-결과" class="headerlink" title="3. 결과"></a>3. 결과</h4><p><img src="https://user-images.githubusercontent.com/5077086/57126503-226d8380-6dc8-11e9-9fb0-3c9d09247f40.png"><br><img src="https://user-images.githubusercontent.com/5077086/57126534-3a450780-6dc8-11e9-9dd8-568748f4903b.png"></p><ul><li>Web 버튼을 누르면 2번째 이미지 처럼 다이얼로그가 나옵니다!</li><li>다이얼로그에 필요한 정보는 차차 넣을 수 있도록하면 되겠습니다.</li><li>문서에서는 <code>web resource</code> 까지 가서 close 버튼에 뭔가 더 해보라고 하지만 여기까지 하겠습니다. :)</li></ul><h3 id="Custom-web-item-provider"><a href="#Custom-web-item-provider" class="headerlink" title="Custom web item provider"></a>Custom web item provider</h3><p><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/5.5.3.1-jira8/jira/fragments/WebItemProvider.html">Web Item Provider Built-In Script</a><br>문서 상에 예로 사용할 수 있는 것으로 설명을 시작하는게 좋을 것 같습니다.<br>Examples of a web item provider might be:</p><ul><li>현재 사용자가 가지고 있는 이슈 중, 액티브 스프린트에 있는 상위 5개의 이슈를 보여줍니다.<ul><li>Show the top 5 issues for the current user in active sprints in the Issues top-level menu</li></ul></li><li>현재 이슈의 서브태스크 각각에 대한 web item을 More Actions 메뉴에서 보여줍니다.<ul><li>Show a web item in the More Actions menu for each of the current issue’s subtasks</li></ul></li></ul><h4 id="예시-My-Top-Issues"><a href="#예시-My-Top-Issues" class="headerlink" title="예시: My Top Issues"></a>예시: My Top Issues</h4><p><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/5.5.3.1-jira8/jira/fragments/WebItemProvider.html#_example_my_top_issues">https://scriptrunner.adaptavist.com/5.5.3.1-jira8/jira/fragments/WebItemProvider.html#_example_my_top_issues</a></p><p>JIRA 상단의 네비게이션 바 메뉴에서 issues를 눌렀을 때,<br>MY TOP ISSUES 섹션에 스프린트에 있는 자신에게 할당된 이슈 상위 5개가 보입니다.<br>예시 링크에 있는대로 진행하시면 원하는 결과를 보실 수 있을 겁니다. (스프린트를 사용한다는 가정하에 말이죠)</p><h3 id="Show-a-web-panel"><a href="#Show-a-web-panel" class="headerlink" title="Show a web panel"></a>Show a web panel</h3><p><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/5.5.3.1-jira8/jira/fragments/WebPanel.html">Web Panel</a><br>커스텀 웹 패널을 만들고 그 영역에 정보를 담을 수 있도록 설정할 수 있습니다.</p><p><img src="https://scriptrunner.adaptavist.com/5.5.3.1-jira8/jira/fragments/image/web-panel.png"></p><ul><li>Location : 설정 코멘트</li><li>Key: UI상 ID가 필요하여 사용하는 것으로 보입니다.</li><li>Menu text: 보이는 메뉴의 타이틀 문구로 사용됩니다.</li><li>Weight: UI 우선순의 값으로, 양수로 설정할 수 있으며 입력하지 않아도 됩니다.</li><li>Condition: 해당 패널이 보이는 조건을 설정할 수 있습니다.</li><li>Provider class&#x2F;script: 패널에 들어갈 데이터를 넣어주는 코드를 작성할 수 있습니다.</li></ul><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">writer.write(<span class="string">&quot;&lt;div style=&#x27;background-color: yellow; text-align: center&#x27;&gt;&quot;</span> +</span><br><span class="line">    <span class="string">&quot;This project is going to be deprecrated. Please create&quot;</span> +</span><br><span class="line">    <span class="string">&quot; all issues in the WIDGET project&lt;/div&gt;&quot;</span>);</span><br></pre></td></tr></table></figure><p>위 이미지 상에서 설정한대로 설정할 경우 이슈 오른쪽 패널에는 아래처럼 보여집니다.<br><img src="https://scriptrunner.adaptavist.com/5.5.3.1-jira8/jira/fragments/image/web-panel-banner.png"></p><p>부모 이슈의 설명(Description) 값을 가져와서 서브태스크에 보여주는 방법도 있습니다.<br><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/5.5.3.1-jira8/jira/fragments/WebPanel.html#_parent_issue_example">WebPanel.html#_parent_issue_example</a></p><p>잘 사용하면 필요한 정보를 적재적소에 보여줄 수 있을 것 같지만,<br>잘못 사용하면 난잡해질 수 있겠다는 생각이 드네요. 위의 예시를 살펴보고 세팅해보면 좋을 것 같습니다.<br>패널 뿐만 아니라 JIRA 이곳 저곳에 정보를 넣을 수 있으니 잘 사용하면 좋을 것 같습니다. :)</p><h3 id="Hide-system-or-plugin-UI-element"><a href="#Hide-system-or-plugin-UI-element" class="headerlink" title="Hide system or plugin UI element"></a>Hide system or plugin UI element</h3><p><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/5.5.3.1-jira8/jira/fragments/HideUIElement.html">Hide UI Element Build-In Script</a><br>JIRA에서 특정 프로젝트나 특정 이슈에서 UI 요소를 숨길 수 있는 기능입니다.<br>예시로는 아래와 같은 것을 할 수 있습니다.</p><ul><li>Move, Clone 기능을 특정 프로젝트에서 이슈 Operation 목록에서 보이지 않게 함</li><li>source control이 필요없는 프로젝트에서 Development panel을 보이지 않게 함</li></ul><p>설정을 위해 입력해야하는 값은 많지 않습니다.</p><ul><li>Note: script note, 이 설정의 설명을 적는 곳입니다.</li><li>Hide what: 어떤 요소를 숨길지 설정합니다. 설정할 수 있는 요소는 <code>web items</code> 들로 리스트는 굉장히 많습니다.<ul><li><code>com.atlassian.jira.plugin.system.issueoperations:*</code> - 이슈 관련 UI 요소</li><li><code>com.pyxis.greenhopper.jira:board-*</code> - board 관련 UI 요소</li></ul></li><li>Condition: 어떤 조건에서 UI를 숨길 것인지 조건을 설정합니다.<ul><li>프로젝트, 이슈 등을 조건으로 설정할 수 있습니다.</li></ul></li></ul><p>이 설정을 사용하기전에 다른 프로젝트에 영향이 있을지 주의가 필요할 것 같습니다.<br>잘못하면 다른 구성원에게 필요한 기능이 보이지 않게될 수 있을테니까요.</p><h3 id="Planning-board-context-menu-item"><a href="#Planning-board-context-menu-item" class="headerlink" title="Planning board context menu item"></a>Planning board context menu item</h3><p><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/5.5.3.1-jira8/jira/fragments/BoardContextMenuItem.html">Board Context Menu Item</a><br><code>Web Item</code> 기능 중에 하나라고 볼 수 있습니다.<br>스크럼, 칸반 보드에서 오른쪽 버튼을 눌렀을 때 나오는 드롭다운에 메뉴를 추가할 수 있는 기능입니다.</p><p><img src="https://scriptrunner.adaptavist.com/5.5.3.1-jira8/jira/fragments/image/context-menu-items.png"></p><center>`Ready for release` 메뉴를 추가한 모습</center><p>가이드 문서에는 메뉴를 누르면 간단한 동작을 하는 것을 보여줍니다.</p><ol><li>스크럼 보드에서 액티브 스프린트에 있는 이슈를 <code>Ready for release</code> 메뉴를 누르면,</li><li>REST endpoint로 등록한 <code>/rest/scriptrunner/latest/custom/ghAddLabel</code> 로 이슈 정보를 보낸다.</li><li>REST endpoint 등록된 함수에서 이슈의 label 필드에 “red” 입력한다.</li><li>flag으로 오른쪽 위에 노티를 보여준다.</li></ol><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">def</span> flag = [</span><br><span class="line">  <span class="symbol">type:</span> <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">  <span class="symbol">title:</span> <span class="string">&quot;Label Added&quot;</span>,</span><br><span class="line">  <span class="symbol">close:</span> <span class="string">&#x27;auto&#x27;</span>,</span><br><span class="line">  <span class="attr">body :</span> <span class="string">&quot;This issue has been approved for release&quot;</span></span><br><span class="line">]</span><br><span class="line">Response.ok(JsonOutput.toJson(flag)).build()</span><br></pre></td></tr></table></figure><p><code>Condition</code>은 복수의 이슈를 받을 수 있기에 List 객체를 받을 수 있게 되어있습니다.<br>예시 코드는 아래와 같이 볼 수 있습니다.</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// All selected issues are resolved</span></span><br><span class="line">issues.every &#123; it.resolution &#125;</span><br><span class="line"><span class="comment">// Selected issues in same project</span></span><br><span class="line">issues*.projectObject.unique().size() == <span class="number">1</span></span><br><span class="line"><span class="comment">// Only a single issue is selected</span></span><br><span class="line">issues.size() == <span class="number">1</span></span><br></pre></td></tr></table></figure><p><code>Do what</code>에는 사용할 수 있는 동작이 많습니다.<br>link로 데이터를 보내서 추가 동작을 설정하거나, 수정, 할당 등을 할 수 있습니다.</p><p><img src="https://user-images.githubusercontent.com/5077086/57022026-da841a80-6c68-11e9-8ba6-00015ca85e01.png"></p><h2 id="마무리"><a href="#마무리" class="headerlink" title="마무리"></a>마무리</h2><p>REST Endpoints, Script Fragment 내용이 많다보니 또 포스트 내용이 넘쳤네요.<br>다음 #4 소개 포스트에서 남은 <code>Escalation Services</code>, <code>Script JQL Functions</code> 에 대해 소개해보겠습니다.</p></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2019-04-21T07:00:00.000Z" title="2019. 4. 21. 오후 4:00:00">2019-04-21</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2022-01-16T07:25:40.769Z" title="2022. 1. 16. 오후 4:25:40">2022-01-16</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/blog/categories/PM/">PM</a><span> / </span><a class="link-muted" href="/blog/categories/PM/System/">System</a></span><span class="level-item">16분안에 읽기 (약 2387 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/2019/04/21/scriptrunner2/">ScriptRunner 소개 2</a></h1><div class="content"><h2 id="ScriptRunner-소개-2"><a href="#ScriptRunner-소개-2" class="headerlink" title="ScriptRunner 소개 #2"></a>ScriptRunner 소개 #2</h2><ul><li><a href="/blog/2019/04/21/scriptrunner1/" title="ScriptRunner 소개 1">ScriptRunner 소개 1</a></li><li><strong><a href="/blog/2019/04/21/scriptrunner2/" title="ScriptRunner 소개 2">ScriptRunner 소개 2</a></strong></li><li><a href="/blog/2019/04/27/scriptrunner3/" title="ScriptRunner 소개 3">ScriptRunner 소개 3</a></li><li><a href="/blog/2019/05/11/scriptrunner4/" title="ScriptRunner 소개 4">ScriptRunner 소개 4</a></li></ul><p>지난 글에서는 Behaviours를 보았고 다음 내용인 콘솔, 리스너 등을 보겠습니다.</p><ul><li>Administration &gt; Add-ons &gt; ScriptRunner<ul><li>Script Console</li><li>Built-in Scripts</li><li>Script Listeners</li><li>Script Fields</li><li>REST Endpoints</li><li>Script Fragments</li><li>Escalation Services</li><li>Script JQL Functions</li></ul></li></ul><h3 id="Script-Console"><a href="#Script-Console" class="headerlink" title="Script Console"></a>Script Console</h3><p>Script Console은 실시간으로 스크립트를 작성하고 결과를 볼 수 있는 곳 입니다.</p><p><a target="_blank" rel="noopener" href="https://1.bp.blogspot.com/-jyVHGTsCUlE/XJ49sjj9HTI/AAAAAAAANXc/JZdZTXyJBC8EioVsiQtxFcKt1KBjO2QFgCLcBGAs/s1600/script%2Bconsole.png"><img src="https://1.bp.blogspot.com/-jyVHGTsCUlE/XJ49sjj9HTI/AAAAAAAANXc/JZdZTXyJBC8EioVsiQtxFcKt1KBjO2QFgCLcBGAs/s640/script%2Bconsole.png" alt="img"></a></p><p>실제로 스크립트를 작성해보고 실행해본 모습입니다.</p><p><a target="_blank" rel="noopener" href="https://4.bp.blogspot.com/-vNFrVfpMtjA/XJ5AFdvHzpI/AAAAAAAANXo/sVegoMWUoAYSbSNmYgKENI2QvEmKNDV8QCLcBGAs/s1600/script%2Bconsole2.png"><img src="https://4.bp.blogspot.com/-vNFrVfpMtjA/XJ5AFdvHzpI/AAAAAAAANXo/sVegoMWUoAYSbSNmYgKENI2QvEmKNDV8QCLcBGAs/s640/script%2Bconsole2.png" alt="img"></a></p><ol><li>스크립트를 작성하는 곳 입니다.</li></ol><ul><li>자동 완성 기능은 없지만 없는 변수나 없는 함수 등은 오류를 보여줍니다.</li></ul><ol start="2"><li>스크립트를 작성한 뒤에 Run 버튼으로 실행할 수 있습니다.</li><li>Result &#x2F; Logs &#x2F; Timing 값을 각각 볼 수 있습니다.</li></ol><ul><li>Result: 스크립트에서 나온 결과물을 볼 수 있습니다.</li><li>Logs: 스크립트에서 출력한 log들을 볼 수 있습니다.</li><li>Timing: Elapsed: 208 ms &#x2F; CPU time: 78 ms 와 같은 내용을 볼 수 있습니다.</li></ul><p>아래는 의도적으로 함수명을 다르게 입력하면 볼 수 있는 에러 화면 입니다.</p><p><a target="_blank" rel="noopener" href="https://3.bp.blogspot.com/-Q4CFbQXQTNE/XJ5BqfC_YMI/AAAAAAAANX0/zjIHJ0pQjCE28iro5VPIxaHBEQs6Mq44QCLcBGAs/s1600/console3.png"><img src="https://3.bp.blogspot.com/-Q4CFbQXQTNE/XJ5BqfC_YMI/AAAAAAAANX0/zjIHJ0pQjCE28iro5VPIxaHBEQs6Mq44QCLcBGAs/s640/console3.png" alt="img"></a></p><p>정적 타입 체크 밖에 해주지 못하지만 최소한의 체크는 할 수 있기에<br>스크립트 작성은 할 수 있습니다.</p><h3 id="Built-in-Scripts"><a href="#Built-in-Scripts" class="headerlink" title="Built-in Scripts"></a>Built-in Scripts</h3><p>ScriptRunner 에 이미 설정(구현)되어 있는 스크립트들을 사용할 수 있는 메뉴입니다.<br>아래 참고 문서에서 사용할 수 있는 스크립트 리스트를 볼 수 있습니다.<br>참고 문서: <a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/latest/jira/builtin-scripts.html">https://scriptrunner.adaptavist.com/latest/jira/builtin-scripts.html</a></p><p><a target="_blank" rel="noopener" href="https://4.bp.blogspot.com/-EMtlwxDO6XE/XKBtiYrzz3I/AAAAAAAANYM/sQU3nhhre3M_4CVfim_aaxiiowo9pF5cwCLcBGAs/s1600/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%2B2019-03-31%2B%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2B4.26.35.png"><img src="https://4.bp.blogspot.com/-EMtlwxDO6XE/XKBtiYrzz3I/AAAAAAAANYM/sQU3nhhre3M_4CVfim_aaxiiowo9pF5cwCLcBGAs/s640/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%2B2019-03-31%2B%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%2B4.26.35.png" alt="img"></a></p><center><아래에 더 많은 스크립트가 있습니다></아래에></center><p>위 화면의 스크립트 중 <strong>“Bulk Fix Resolutions”</strong> 스크립트를 확인해보겠습니다.<br>이 스크립트는 Filter에 있는 티켓들의 Resolution을 변경할 수 있습니다.<br>참고 링크: <a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/latest/jira/builtin-scripts.html#_bulk_fix_resolutions">Bulk Fix Resolutions</a></p><p><a target="_blank" rel="noopener" href="https://2.bp.blogspot.com/-yX8IA8-n0Ok/XKBwoHW0l8I/AAAAAAAANYY/bO32KMbtTVULbmsygDrQpGy884sVWV-JgCLcBGAs/s1600/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%2B2019-03-31%2B%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2B4.28.31.png"><img src="https://2.bp.blogspot.com/-yX8IA8-n0Ok/XKBwoHW0l8I/AAAAAAAANYY/bO32KMbtTVULbmsygDrQpGy884sVWV-JgCLcBGAs/s640/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%2B2019-03-31%2B%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%2B4.28.31.png" alt="img"></a></p><p>JQL을 바로 작성하는 것은 아니며 기존에 만들어둔 Filter를 사용하여 동작하는 스크립트 입니다.<br>그 외에 다른 스크립트의 목록은 아래와 같습니다.</p><ul><li><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/latest/jira/builtin-scripts.html#_escalation_service">Escalation Service</a></li><li><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/latest/jira/builtin-scripts.html_switch_user">Switch User</a></li><li><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/latest/jira/builtin-scripts.html#_change_dashboard_or_filter_ownership">Change dashboard or filter ownership</a></li><li><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/latest/jira/builtin-scripts.html#_copy_project">Copy Project</a></li><li><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/latest/jira/builtin-scripts.html#_copy_custom_field_values">Copy Custom Field Values</a></li><li><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/latest/jira/builtin-scripts.html#_bulk_import_custom_field_values">Bulk Import Custom Field Values</a></li><li><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/latest/jira/builtin-scripts.html#_split_custom_field_context">Split Custom Field Context</a></li><li><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/latest/jira/builtin-scripts.html#_script_registry">Script Registry</a></li><li><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/latest/jira/builtin-scripts.html#_condition_tester">Condition Tester</a></li><li><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/latest/jira/builtin-scripts.html#_clear_jira_or_groovy_caches">Clear JIRA or Groovy Caches</a></li><li><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/latest/jira/builtin-scripts.html#_bulk_copy_slas">Bulk Copy SLAs</a></li><li><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/latest/jira/builtin-scripts.html#_list_scheduled_jobs">List scheduled jobs</a></li><li><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/latest/jira/builtin-scripts.html#_view_server_log_files">View server log files</a></li></ul><h3 id="Listeners"><a href="#Listeners" class="headerlink" title="Listeners"></a>Listeners</h3><p>Listeners는 JIRA에서 일어나는 이벤트에 따라 스크립트를 동작하게 합니다.<br>프로젝트, 특정 이슈, 특정 이벤트에 따라 동작할 수 있도록 설정할 수 있습니다.<br>참고 문서: <a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/latest/jira/listeners.html">https://scriptrunner.adaptavist.com/latest/jira/listeners.html</a></p><p><a target="_blank" rel="noopener" href="https://2.bp.blogspot.com/-6iNvRNsQRj0/XKB0ggjPDgI/AAAAAAAANYk/qdiOnIs2CjMvSl0HXcs9MrX1MHaDV1xmwCLcBGAs/s1600/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%2B2019-03-31%2B%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2B5.02.39.png"><img src="https://2.bp.blogspot.com/-6iNvRNsQRj0/XKB0ggjPDgI/AAAAAAAANYk/qdiOnIs2CjMvSl0HXcs9MrX1MHaDV1xmwCLcBGAs/s640/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%2B2019-03-31%2B%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%2B5.02.39.png" alt="img"></a></p><center><여러가지 리스너를 추가할 수 있습니다></여러가지></center><p>이미 있는 리스너 타입을 사용해도 되고<br>아예 이벤트를 받는 처음부터 스크립트 마무리까지 관리하는 Custom listener를 사용할 수도 있습니다.</p><p>이미 있는 리스너 타입 하나를 한번 보겠습니다.<br><a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/5.4.39/jira/builtin-scripts.html">https://scriptrunner.adaptavist.com/5.4.39/jira/builtin-scripts.html</a><br><code>Create a sub-task: Create a sub-task, Will Optionally reopen a matching sub-task</code></p><p><a target="_blank" rel="noopener" href="https://4.bp.blogspot.com/-WixKlg4utC0/XKB25DQ5OdI/AAAAAAAANYw/oKiVUh9f3qMkRVnkyvolL1S5a-v_WEcbQCLcBGAs/s1600/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%2B2019-03-31%2B%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2B5.14.14.png"><img src="https://4.bp.blogspot.com/-WixKlg4utC0/XKB25DQ5OdI/AAAAAAAANYw/oKiVUh9f3qMkRVnkyvolL1S5a-v_WEcbQCLcBGAs/s640/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%2B2019-03-31%2B%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%2B5.14.14.png" alt="img"></a></p><center><특정 이벤트에서 sub-task를 만들 수 있는 리스너 입니다></특정></center><p>Create a sub-task Listener를 등록하는 화면의 각각 입력 필드에 대해 알아보겠습니다.</p><ul><li><strong>Note</strong>: Listener 등록시 해당 설명으로 Listener 리스트에서 설명을 볼 수 있습니다.</li><li><strong>Project(s)</strong>: 해당 이벤트가 발생하는 프로젝트를 설정합니다.<ul><li>프로젝트는 자동 완성되어 입력할 수 있습니다.</li></ul></li><li><strong>Events</strong>: 어떤 이벤트를 받아서 처리할 것인지 이벤트를 설정합니다.<ul><li>All Issue Events, Issue Created, Issue Updated 등의 이벤트를 추가할 수 있습니다.</li></ul></li><li><strong>Condition</strong>: 해당 이벤트가 발생했을 경우, True &#x2F; False를 판단할 스크립트를 설정합니다.<ul><li><code>Show examples</code>를 누르면 예시 코드를 볼 수 있습니다.</li><li><code>Priority changed to Major (Listeners only)</code> - Listeners 에서만 동작하는 코드로 <strong>priority가 Major로 변경되었을 경우 True를 반환</strong>하는 스크립트 입니다.</li><li>그 외에 많은 예제 스크립트가 있으니 참고하여 작성하면 됩니다.</li></ul></li><li><strong>Target Issue Type</strong>: Sub-task 카테고리의 이슈 타입을 설정합니다.</li><li><strong>Subtask Summary</strong>: 생성할 Sub-task 제목(Summary)를 설정합니다.</li><li><strong>Fields to copy</strong>: All &#x2F; None &#x2F; Custom 으로 상위 태스크의 필드 값을 복사할 것인지 설정합니다.</li><li><strong>As User</strong>: 어떤 유저로 티켓 생성을 할 것인지 설정합니다.<ul><li>값이 없을 경우 현재 유저로 설정합니다.</li></ul></li><li><strong>Additional issue action</strong>: Sub-task 생성 이후 타겟 이슈(부모 이슈)에 대해 추가적인 작업을 하도록 설정합니다.<ul><li>Condition과는 달리 추가적인 작업을 할 수 있도록 하는 스크립트 입력 필드입니다.</li><li>제목을 바꾸거나 팝업 메세지를 따로 띄우거나 할 수 있습니다.</li><li><code>Show examples</code>를 누르면 예시 코드를 볼 수 있습니다.</li></ul></li><li><strong>Subtask Action</strong>: 이미 생성된 Subtask가 있을 경우 transition을 진행할 것인지 설정합니다.<ul><li>주의할 점은 적용하고자하는 프로젝트의 서브 태스크가 어떤 워크플로우를 쓰는가를 확인하여 적용해야 합니다.</li></ul></li></ul><p>Create a sub-task 외에 다른 listener 타입이 있으며 아예 커스텀한 listener도 만들 수 있습니다.<br>Custom listener의 경우 다음과 같이 만들 수 있습니다.</p><p><a target="_blank" rel="noopener" href="https://4.bp.blogspot.com/-dAM7Fai7N3g/XKCwT0APuhI/AAAAAAAANZA/fGBS_fDR9XgwXx60hy4TiPeeYq-uUfj1wCLcBGAs/s1600/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%2B2019-03-31%2B%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2B9.18.54.png"><img src="https://4.bp.blogspot.com/-dAM7Fai7N3g/XKCwT0APuhI/AAAAAAAANZA/fGBS_fDR9XgwXx60hy4TiPeeYq-uUfj1wCLcBGAs/s640/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%2B2019-03-31%2B%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%2B9.18.54.png" alt="img"></a></p><p>이 listener는 앞서 설명드린 create a sub-task 와 프로젝트, 이벤트 필드 설정하는 것은 같지만<br>이벤트를 받고 처리하는 방식이 다릅니다.</p><p>발생한 이벤트에서 각종 데이터를 받아 처리해야하는 listener 타입 입니다.<br>listener에 필요한 listener 타입이 없다면 커스텀하게 만들어서 사용하면 됩니다.</p><p>&#x2F;&#x2F; Listener 중 Remote Custom listener는 JIRA에 등록되어있는 application에도 scriptRunner를 설치해야 사용할 수 있습니다.</p><h3 id="Script-Fields"><a href="#Script-Fields" class="headerlink" title="Script Fields"></a>Script Fields</h3><p>Script fields는 아래와 같이 설명이 나와있습니다.</p><blockquote><p>A script field is a custom field that allows you to automatically display a value according to the results of a ScriptRunner script.</p></blockquote><p>요약하자면, “<strong>스크립트러너의 스크립트 결과를 보여주는</strong> <strong>Custom field</strong>“ 입니다.<br>참고 문서: <a target="_blank" rel="noopener" href="https://scriptrunner.adaptavist.com/latest/jira/scripted-fields.html">https://scriptrunner.adaptavist.com/latest/jira/scripted-fields.html</a></p><p><a target="_blank" rel="noopener" href="https://1.bp.blogspot.com/-_Qd-7-EplLA/XKC2n-cYvLI/AAAAAAAANZM/-XGMfWnQO3wReeQcTW4tCRk0jGAYNB2IQCLcBGAs/s1600/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%2B2019-03-31%2B%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2B9.45.39.png"><img src="https://1.bp.blogspot.com/-_Qd-7-EplLA/XKC2n-cYvLI/AAAAAAAANZM/-XGMfWnQO3wReeQcTW4tCRk0jGAYNB2IQCLcBGAs/s640/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%2B2019-03-31%2B%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%2B9.45.39.png" alt="img"></a></p><p>다음 글에서는 남은 기능을 소개해보겠습니다.</p><ul><li>REST Endpoints</li><li>Script Fragments</li><li>Escalation Services</li><li>Script JQL Functions</li></ul></div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous is-invisible is-hidden-mobile"><a href="/blog/tags/ScriptRunner/page/0/">이전</a></div><div class="pagination-next"><a href="/blog/tags/ScriptRunner/page/2/">다음</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link is-current" href="/blog/tags/ScriptRunner/">1</a></li><li><a class="pagination-link" href="/blog/tags/ScriptRunner/page/2/">2</a></li></ul></nav></div><div class="column column-left is-3-tablet is-3-desktop is-3-widescreen order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://www.gravatar.com/avatar/36b2e11dada89a7d6bbb916157ab57ea?s=128" alt="Pineoc"></figure><p class="title is-size-4 is-block" style="line-height:inherit">Pineoc</p><p class="is-size-6 is-block">PM &amp; Developer</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">포스트</p><a href="/blog/archives"><p class="title">83</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">카테고리</p><a href="/blog/categories"><p class="title">13</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">태그</p><a href="/blog/tags"><p class="title">39</p></a></div></div></nav></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">카테고리</h3><ul class="menu-list"><li><a class="level is-mobile" href="/blog/categories/Blog/"><span class="level-start"><span class="level-item">Blog</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/blog/categories/Life/"><span class="level-start"><span class="level-item">Life</span></span><span class="level-end"><span class="level-item tag">11</span></span></a><ul><li><a class="level is-mobile" href="/blog/categories/Life/Book/"><span class="level-start"><span class="level-item">Book</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/blog/categories/Life/IoT/"><span class="level-start"><span class="level-item">IoT</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/blog/categories/Life/Study/"><span class="level-start"><span class="level-item">Study</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/blog/categories/Life/Think/"><span class="level-start"><span class="level-item">Think</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li><li><a class="level is-mobile" href="/blog/categories/PM/"><span class="level-start"><span class="level-item">PM</span></span><span class="level-end"><span class="level-item tag">43</span></span></a><ul><li><a class="level is-mobile" href="/blog/categories/PM/Framework/"><span class="level-start"><span class="level-item">Framework</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/blog/categories/PM/System/"><span class="level-start"><span class="level-item">System</span></span><span class="level-end"><span class="level-item tag">31</span></span></a></li><li><a class="level is-mobile" href="/blog/categories/PM/Work/"><span class="level-start"><span class="level-item">Work</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></li><li><a class="level is-mobile" href="/blog/categories/Tech/"><span class="level-start"><span class="level-item">Tech</span></span><span class="level-end"><span class="level-item tag">28</span></span></a><ul><li><a class="level is-mobile" href="/blog/categories/Tech/Javascript/"><span class="level-start"><span class="level-item">Javascript</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/blog/categories/Tech/Program-Service/"><span class="level-start"><span class="level-item">Program&amp;Service</span></span><span class="level-end"><span class="level-item tag">16</span></span></a></li></ul></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">최근 글</h3><article class="media"><figure class="media-left"><a class="image" href="/blog/2022/08/21/Atlassian-playbook-5whys/"><img src="https://user-images.githubusercontent.com/5077086/187054382-6fed5a18-912c-4b1c-82b0-b98534c4b1cb.png" alt="Atlassian playbook - 5 whys"></a></figure><div class="media-content"><p class="date"><time datetime="2022-08-20T15:43:13.000Z">2022-08-21</time></p><p class="title"><a href="/blog/2022/08/21/Atlassian-playbook-5whys/">Atlassian playbook - 5 whys</a></p><p class="categories"><a href="/blog/categories/PM/">PM</a> / <a href="/blog/categories/PM/Framework/">Framework</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2022-07-31T06:31:40.000Z">2022-07-31</time></p><p class="title"><a href="/blog/2022/07/31/perforce-trigger-update-cl-description/">Perforce Trigger로 jira key → jira url로 변경해보기</a></p><p class="categories"><a href="/blog/categories/Tech/">Tech</a> / <a href="/blog/categories/Tech/Program-Service/">Program&amp;Service</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2022-07-02T04:30:17.000Z">2022-07-02</time></p><p class="title"><a href="/blog/2022/07/02/Productplan-vs-releaseplan/">Product Plan vs Release Plan 글을 보고</a></p><p class="categories"><a href="/blog/categories/PM/">PM</a> / <a href="/blog/categories/PM/Work/">Work</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2022-06-18T13:40:59.000Z">2022-06-18</time></p><p class="title"><a href="/blog/2022/06/18/ndc22-review-production/">NDC22 프로덕션 발표 리뷰 - 피파 온라인4 라이브 서비스</a></p><p class="categories"><a href="/blog/categories/PM/">PM</a> / <a href="/blog/categories/PM/Work/">Work</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/blog/2022/05/21/think-issuetracker/"><img src="https://user-images.githubusercontent.com/5077086/169641123-77d65747-5d29-4a50-ac01-f5c5e9cf8375.jpg" alt="이슈 트래커(Issue Tracker Jira)에 잘 접근하는 방법 고민 #1"></a></figure><div class="media-content"><p class="date"><time datetime="2022-05-21T06:30:17.000Z">2022-05-21</time></p><p class="title"><a href="/blog/2022/05/21/think-issuetracker/">이슈 트래커(Issue Tracker Jira)에 잘 접근하는 방법 고민 #1</a></p><p class="categories"><a href="/blog/categories/PM/">PM</a> / <a href="/blog/categories/PM/Work/">Work</a></p></div></article></div></div><div class="card widget" data-type="adsense"><div class="card-content"><div class="menu"><h3 class="menu-label">광고</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-8535740075617154" data-ad-slot="8690513316" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div><div class="card"><div class="card-content"><script src="https://ads-partners.coupang.com/g.js"></script><script>new PartnersCoupang.G({id:330412})</script></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/blog/"><img src="/blog/img/logo.svg" alt="Pineoc&#039;s Blog" height="28"></a><p class="is-size-7"><span>&copy; 2022 Pineoc</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("ko")</script><script>var IcarusThemeSettings={article:{highlight:{clipboard:!0,fold:"unfolded"}}}</script><script src="/blog/js/column.js"></script><script src="/blog/js/animation.js"></script><a id="back-to-top" title="맨 위로" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/blog/js/back_to_top.js" defer></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load",()=>{"function"==typeof $.fn.lightGallery&&$(".article").lightGallery({selector:".gallery-item"}),"function"==typeof $.fn.justifiedGallery&&($(".justified-gallery > p > .gallery-item").length&&$(".justified-gallery > p > .gallery-item").unwrap(),$(".justified-gallery").justifiedGallery())})</script><script src="/blog/js/main.js" defer></script><style>.searchbox .searchbox-body{background:#fff}</style><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="입력 하세요..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"><gcse:searchresults-only></gcse:searchresults-only></div></div><script>!function(){var e=document.createElement("script"),t=(e.type="text/javascript",e.async=!0,e.src="https://cse.google.com/cse.js?cx=4c5e31efb3c79fae6",document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)}()</script></div><script src="/blog/js/google_cse.js"></script></body></html>