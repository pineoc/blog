<!doctype html><html lang="ko"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="robots" content="noindex"><meta><title>카테고리: Tech - Pineoc&#039;s Blog</title><link rel="manifest" href="/blog/manifest.json"><meta name="application-name" content="Pineoc&#039;s Blog"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Pineoc&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="엔지니어 &amp;#x2F; 개발 PM &amp;#x2F; Tech에 관심많은 PM의 블로그"><meta property="og:type" content="blog"><meta property="og:title" content="Pineoc&#039;s Blog"><meta property="og:url" content="https://pineoc.github.io/blog"><meta property="og:site_name" content="pineoc&#039;s blog"><meta property="og:description" content="엔지니어 &amp;#x2F; 개발 PM &amp;#x2F; Tech에 관심많은 PM의 블로그"><meta property="og:locale" content="ko_KR"><meta property="og:image" content="https://pineoc.github.io/blog/img/og_image.png"><meta property="article:author" content="Pineoc"><meta property="article:tag" content="Developer, PM"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/blog/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://pineoc.github.io/blog"},"headline":"Pineoc's Blog","image":["https://pineoc.github.io/blog/img/og_image.png"],"author":{"@type":"Person","name":"Pineoc"},"publisher":{"@type":"Organization","name":"Pineoc's Blog","logo":{"@type":"ImageObject","url":"https://pineoc.github.io/img/logo.svg"}},"description":"엔지니어 &#x2F; 개발 PM &#x2F; Tech에 관심많은 PM의 블로그"}</script><link rel="icon" href="/blog/img/favicon.svg"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/blog/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-45439235-4" async></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-45439235-4")</script><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><script data-ad-client="ca-pub-8535740075617154" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><script>!function(){function e(){if(location.hash){Array.from(document.querySelectorAll(".tab-content")).forEach(e=>{e.classList.add("is-hidden")}),Array.from(document.querySelectorAll(".tabs li")).forEach(e=>{e.classList.remove("is-active")});const e=document.querySelector(location.hash),t=(e&&e.classList.remove("is-hidden"),document.querySelector(`a[href="${location.hash}"]`));t&&t.parentElement.classList.add("is-active")}}e(),window.addEventListener("hashchange",e,!1)}()</script><meta name="generator" content="Hexo 6.0.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/blog/"><img src="/blog/img/logo.svg" alt="Pineoc&#039;s Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/blog/">Home</a><a class="navbar-item" href="/blog/archives">Archives</a><a class="navbar-item" href="/blog/categories">Categories</a><a class="navbar-item" href="/blog/tags">Tags</a><a class="navbar-item" href="/blog/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/pineoc"><i class="fab fa-github"></i></a><a class="navbar-item search" title="검색" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-9-tablet is-9-desktop is-9-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/blog/categories">카테고리</a></li><li class="is-active"><a href="#" aria-current="page">Tech</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2019-06-30T06:22:35.000Z" title="2019. 6. 30. 오후 3:22:35">2019-06-30</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2023-06-04T03:51:15.857Z" title="2023. 6. 4. 오후 12:51:15">2023-06-04</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/blog/categories/Tech/">Tech</a><span> / </span><a class="link-muted" href="/blog/categories/Tech/Game/">Game</a></span><span class="level-item">13분안에 읽기 (약 1917 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/2019/06/30/OpenGL-ES-ver-diff-2-0-3-0/">OpenGL ES 버전 2.0과 3.0 차이</a></h1><div class="content"><p><img src="https://3.bp.blogspot.com/-c_SkNvG1Vr8/WRhwNJUMi5I/AAAAAAAAH7E/IBNjjCt97uYbo9oewA7yQNQxG_NP4IaFgCK4B/s640/opengl.png"></p><h2 id="OpenGL-ES-Embeded-System"><a href="#OpenGL-ES-Embeded-System" class="headerlink" title="OpenGL ES(Embeded System)"></a>OpenGL ES(Embeded System)</h2><p>Cocos2d-x 버전 차이에 대해서 공부하던 중에 그 기반이 되는 OpenGL ES의 버전에도<br>큰 차이가 있지 않을까하여 공부해봤습니다.</p><p>우선 OpenGL ES란, (<a target="_blank" rel="noopener" href="https://ko.wikipedia.org/wiki/OpenGL_ES">Wikipedia-ko</a>)</p><blockquote><p>OpenGL ES (임베디드 단말을 위한 OpenGL)는 크로노스 그룹이 정의한 3차원 컴퓨터 그래픽스 API인 OpenGL의 서브셋으로, 휴대전화, PDA 등과 같은 임베디드 단말을 위한 API이다.</p></blockquote><p>한글로 작성된 위키는 짧군요. 영어로 작성된 위키를 더 보겠습니다. (<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/OpenGL_ES">Wikipedia-en</a>)</p><blockquote><p>OpenGL for Embedded Systems (OpenGL ES or GLES) is a subset of the OpenGL computer graphics rendering application programming interface (API) for rendering 2D and 3D computer graphics such as those used by video games, typically hardware-accelerated using a graphics processing unit (GPU). It is designed for embedded systems like smartphones, computer tablets, video game consoles and PDAs. OpenGL ES is the “most widely deployed 3D graphics API in history”. The API is cross-language and multi-platform. The libraries GLUT and GLU are not available for OpenGL ES. OpenGL ES is managed by the non-profit technology consortium Khronos Group. Vulkan, a next-generation API from Khronos, is made for simpler high performance drivers for mobile and desktop devices.</p></blockquote><p>설명에 큰 차이는 없지만, API에 대한 설명에는 크로스 랭귀지, 멀티 플랫폼이 포함되어 있네요.<br>OpenGL에서 사용할 수 있는 <code>GLUT</code>, <code>GLU</code>는 OpenGL ES에서는 사용할 수 없다는 것 정도를 추가로 알 수 있었습니다.</p><p>각 버전별 설명도 잘 나와있는 영문 위키를 보면,</p><h3 id="OpenGL-ES-2-0-EN"><a href="#OpenGL-ES-2-0-EN" class="headerlink" title="OpenGL ES 2.0 - (EN)"></a>OpenGL ES 2.0 - (EN)</h3><p>OpenGL ES 2.0 was publicly released in March 2007.<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/OpenGL_ES#cite_note-6">[6]</a> It is based roughly on OpenGL 2.0, but it eliminates most of the fixed-function rendering pipeline in favor of a programmable one in a move similar to transition from OpenGL 3.0 to 3.1.<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/OpenGL_ES#cite_note-7">[7]</a> Control flow in shaders is generally limited to forward branching and to loops where the maximum number of iterations can easily be determined at compile time.<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/OpenGL_ES#cite_note-8">[8]</a> Almost all rendering features of the transform and lighting stage, such as the specification of materials and light parameters formerly specified by the fixed-function API, are replaced by <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Shader">shaders</a> written by the graphics programmer. As a result, OpenGL ES 2.0 is not <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Backward_compatibility">backward compatible</a> with OpenGL ES 1.1. Some incompatibilities between the desktop version of OpenGL and OpenGL ES 2.0 persisted until OpenGL 4.1, which added the <code>GL_ARB_ES2_compatibility</code> extension.<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/OpenGL_ES#cite_note-9">[9]</a></p><h3 id="OpenGL-ES-3-0-EN"><a href="#OpenGL-ES-3-0-EN" class="headerlink" title="OpenGL ES 3.0 - (EN)"></a>OpenGL ES 3.0 - (EN)</h3><p>The OpenGL ES 3.0 specification<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/OpenGL_ES#cite_note-10">[10]</a> was publicly released in August 2012.<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/OpenGL_ES#cite_note-11">[11]</a> OpenGL ES 3.0 is backwards compatible with OpenGL ES 2.0, enabling applications to incrementally add new visual features to applications. OpenGL 4.3 provides full compatibility with OpenGL ES 3.0. Version 3.0 is also base of <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/WebGL">WebGL</a> 2.0.<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/OpenGL_ES#cite_note-12">[12]</a></p><p>New functionality in the OpenGL ES 3.0 specification includes:</p><ul><li><p>multiple enhancements to the <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Rendering_pipeline">rendering pipeline</a> to enable acceleration of advanced visual effects including: <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Occlusion_queries">occlusion queries</a>, <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Transform_feedback">transform feedback</a>, <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Geometry_instancing">instanced rendering</a> and support for four or more <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Render_Target">rendering targets</a>,</p></li><li><p>high quality <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Ericsson_Texture_Compression#ETC2_and_EAC">ETC2 &#x2F; EAC</a> <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Texture_compression">texture compression</a> as a standard feature, eliminating the need for a different set of <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Texture_mapping">textures</a> for each platform,</p></li><li><p>a new version of the GLSL ES <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Shading_language">shading language</a> with full support for integer and <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/32-bit">32-bit</a> <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Floating_point">floating point</a> operations;<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/OpenGL_ES#cite_note-13">[13]</a></p></li><li><p>greatly enhanced <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Texture_mapping">texturing</a> functionality including guaranteed support for <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Floating_point">floating point</a> textures, 3D textures, depth textures, vertex textures, NPOT textures, R&#x2F;RG textures, immutable textures, 2D array textures, <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Swizzling_(computer_graphics)">swizzles</a>, <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Level_of_detail">LOD</a> and <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Mipmap">mip level</a> clamps, seamless <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Cube_mapping">cube maps</a> and sampler objects,</p></li><li><p>an extensive set of required, explicitly sized <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Texture_mapping">texture</a> and render-buffer formats, reducing implementation variability and making it much easier to write portable applications.</p></li></ul><p>(참고, <a target="_blank" rel="noopener" href="http://www.informit.com/articles/article.aspx?p=2181697&seqNum=2">http://www.informit.com/articles/article.aspx?p=2181697&amp;seqNum=2</a>)</p><p>음, 내용이 많아 번역한 내용으로 각각 살펴보고 정리해보겠습니다.</p><h3 id="OpenGL-ES-2-0"><a href="#OpenGL-ES-2-0" class="headerlink" title="OpenGL ES 2.0"></a>OpenGL ES 2.0</h3><p>OpenGL ES 2.0는 2007년 3월에 출시되었습니다. OpenGL 2.0을 기반으로 하지만 OpenGL 3.0에서 3.1로 업데이트 될 때와 비슷하게 고정 렌더링 파이프라인을 제거하였습니다. 셰이더의 제어 흐름은 컴파일할 때에 쉽게 결정할 수 있는 순방향 분기, 루프로 제한됩니다.</p><p>이전에 고정 함수 API에 의해 지정된 재질 및 조명 매개 변수와 같은 변형 및 조명 스테이지의 거의 모든 렌더링 기능은 그래픽 프로그래머가 작성한 쉐이더로 대체되었습니다. 따라서 OpenGL ES 2.0은 OpenGL ES 1.1과 호환되지 않습니다. OpenGL과 OpenGL ES 2.0 데스크톱 버전 간의 일부 비 호환성은 GL_ARB_ES2_compatibility 확장을 추가한 OpenGL 4.1까지 지속됩니다.</p><h3 id="OpenGL-ES-3-0"><a href="#OpenGL-ES-3-0" class="headerlink" title="OpenGL ES 3.0"></a>OpenGL ES 3.0</h3><p>OpenGL ES 3.0 사양은 2012년 8월에 공개되었습니다.<br>OpenGL ES 3.0은 OpenGL ES 2.0과 하위 호환되므로 응용 프로그램이 응용 프로그램에 점진적으로 새로운 시각적 기능을 추가할 수 있습니다.</p><p>OpenGL 4.3은 OpenGL ES 3.0과 완벽한 호환성을 제공합니다.<br>OpenGL ES 3.0은 WebGL 2.0의 기반이기도합니다.</p><p>새로운 기능은 아래와 같습니다.</p><ul><li>오클루전 쿼리, 변환 피드백, 인스턴스 렌더링 및 4개 이상의 렌더링 대상에 대한 지원을 비롯하여 고급 시각 효과를 가속화할 수 있도록 렌더링 파이프 라인에 대한 여러 가지 향상된 기능을 제공합니다.</li><li>고품질 ETC2&#x2F;EAC 텍스처 압축을 표준 기능으로 지원하여 각 플랫폼에 다른 텍스처 세트가 필요하지 않습니다.</li><li>부동 소수점 텍스처, 3D 텍스처, 깊이 텍스처, 정점 텍스처, NPOT 텍스처, R&#x2F;RG 텍스처, 불변 텍스처, 2D 배열 텍스처, 스위즐, LOD 및 밉(Mip) 레벨 클램프, 매끄러운 큐브 맵 및 샘플러 객체에 대한 보장된 지원을 포함하여 크게 향상된 텍스처링 기능을 포함합니다.</li><li>명시적으로 크기가 필요한 텍스처 및 렌더링 버퍼 형식의 광범위한 세트로, 구현 변동성을 줄이고 모바일 앱을 훨씬 쉽게 개발할 수 있습니다.</li></ul><p>구글 번역기의 도움을 받아 해석해보았습니다.<br>내용 상으로는 전반적으로 기능 추가, 성능 향상이 있어보입니다.<br>(버전이 올라가면 늘 있는 성능 향상인 것 같지만요)<br>2.0과 하위 호환이 된다는 것이 큰 것으로 보이며 더 깊게 봐야겠지만 렌더링 대상 지원 추가, 렌더링 파이프 라인 기능 향상 등이 눈에 띄네요.<br>텍스쳐링 기능도 지원 범위가 넓어진 것도 큰 것 같습니다.</p><p>성능 테스트 자료가 있으면 좋겠는데.. 없네요.<br>주로 OpenGL ES와 Vulkan 성능 분석이 많아서 OpenGL ES 2.0과 3.0은 성능 자료는 찾기 힘드네요.<br>성능 분석에 큰 의미가 없어서 그런 것일 수도 있겠습니다.<br>(기기에 따라 성능 차이가 많이 나서)</p><p>OpenGL ES 버전 차이가 어떤가에 대해 개괄적인 내용을 살펴보았습니다.<br>렌더링 방식, 텍스처 처리방식, 버퍼 크기등에 대한 차이가 있었네요.</p><p>그래픽 엔지니어는 아니어서 자세한 내용은 더 정리하기 힘들지만<br>다른 좋은 레퍼런스가 있다면 추가해서 들고 오겠습니다.</p></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2019-06-30T01:06:28.000Z" title="2019. 6. 30. 오전 10:06:28">2019-06-30</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2022-01-16T07:25:40.763Z" title="2022. 1. 16. 오후 4:25:40">2022-01-16</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/blog/categories/Tech/">Tech</a></span><span class="level-item">6분안에 읽기 (약 866 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/2019/06/30/gitlab-CI-Cordova/">GitLab CI 해보기 - Cordova</a></h1><div class="content"><blockquote><p>이 글은 2018년 1월 기준으로 작성된 글입니다. 현재 Gitlab 설정, Cordova 환경과는 다를 수 있습니다.</p></blockquote><h2 id="GitLab-CI"><a href="#GitLab-CI" class="headerlink" title="GitLab CI"></a>GitLab CI</h2><p>소개: <a target="_blank" rel="noopener" href="https://about.gitlab.com/product/continuous-integration/">https://about.gitlab.com/product/continuous-integration/</a><br>GitLab에서 CI를 지원한다는 것을 듣고 당시 진행하던 프로젝트를 설정해보고자 했습니다.<br>CI는 Continuous Integration의 약자로 지속적인 통합으로 부릅니다.</p><p>CI는 “지속적으로 퀄리티 컨트롤을 적용하는 프로세스를 실행하는 것이다. (<a target="_blank" rel="noopener" href="https://ko.wikipedia.org/wiki/%EC%A7%80%EC%86%8D%EC%A0%81_%ED%86%B5%ED%95%A9">Wiki</a>)으로 설명할 수 있고 이 글에서는 CI에서 자세히 다룰 예정은 아니기에 다른 좋은 문서를 참고해주세요. :)</p><p>GitLab 소개문서에는 CD(Continuous Delivery OR Continuous Deployment-지속적인 배포)도<br>다루고 있으니 참고하시면 좋을 것 같습니다.</p><p>저는 CI까지만 설정해보겠습니다. (나중에 CD까지 해볼 수 있겠죠.)</p><h2 id="CI-설정-시나리오"><a href="#CI-설정-시나리오" class="headerlink" title="CI 설정 시나리오"></a>CI 설정 시나리오</h2><ol><li>빌드 환경 설정</li><li>.gitlab-ci.yml 설정</li><li>GitLab Repo에 push!</li><li>빌드!</li></ol><h3 id="빌드-환경-설정"><a href="#빌드-환경-설정" class="headerlink" title="빌드 환경 설정"></a>빌드 환경 설정</h3><p>여기서 어려울 것으로 예상한 것은 빌드 환경을 설정하는 것이라고 생각했습니다.<br><a target="_blank" rel="noopener" href="https://medium.freecodecamp.org/how-to-setup-ci-on-gitlab-using-docker-66e1e04dcdc2">freecodecamp 미디엄 글</a>에서는 도커 이미지를 사용하여 어렵지 않게 풀어낸 것 같습니다.</p><p>빌드 환경 설정에 필요한 Cordova 환경설정이 무엇인지 살펴보았습니다.<br>Cordova 7.x 기준의 <code>안드로이드 빌드 환경</code>은 아래와 같습니다. (<a target="_blank" rel="noopener" href="https://cordova.apache.org/docs/en/7.x/guide/platforms/android/index.html#installing-the-requirements">참고</a>)</p><ul><li>JDK 8 이상</li><li>Android SDK, Android SDK Packages</li><li>Node.js 8.9.4 (NPM)</li><li>Cordova 7.x</li><li>(옵션) 환경 변수 설정</li></ul><p>iOS 빌드 환경은 macOS 이미지가 없어서 설정해보지 못했습니다. ;(<br>안드로이드 설정만 해봐야겠네요.</p><p>앞서 freecodecamp 미디엄 글에서는 docker 이미지를 사용해서 CI를 설정을 했습니다.<br>Cordova 관련한 docker 이미지가 있는지 확인해보았고 적당한 것을 찾았습니다.<br><a target="_blank" rel="noopener" href="https://hub.docker.com/r/beevelop/cordova/">https://hub.docker.com/r/beevelop/cordova/</a></p><p>이 이미지를 사용하여 만들어본 저장소는 아래와 같습니다. (저장소는 기본적인 프로젝트 생성한 상태입니다.)<br><a target="_blank" rel="noopener" href="https://gitlab.com/pineoc/cordova-ci-demo">https://gitlab.com/pineoc/cordova-ci-demo</a></p><h3 id="gitlab-ci-yml-설정"><a href="#gitlab-ci-yml-설정" class="headerlink" title=".gitlab-ci.yml 설정"></a>.gitlab-ci.yml 설정</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">image:</span> <span class="string">beevelop/cordova:v7.1.0</span></span><br><span class="line"></span><br><span class="line"><span class="attr">before_script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cordova</span> <span class="string">platform</span> <span class="string">add</span> <span class="string">android</span></span><br><span class="line"></span><br><span class="line"><span class="attr">stages:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">build</span></span><br><span class="line"></span><br><span class="line"><span class="attr">build:</span></span><br><span class="line">  <span class="attr">stage:</span> <span class="string">build</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">cordova</span> <span class="string">build</span> <span class="string">android</span></span><br></pre></td></tr></table></figure><h3 id="GitLab-Repo에-Push"><a href="#GitLab-Repo에-Push" class="headerlink" title="GitLab Repo에 Push"></a>GitLab Repo에 Push</h3><p>위에서 설정한 <code>.gitlab-ci.yml</code> 파일을 프로젝트 최상단 경로에 두면 GitLab에서 파일을 인식하여<br>설정한 내용대로 빌드를 진행합니다. 진행된 내역은 아래 링크에서 확인할 수 있습니다.<br><a target="_blank" rel="noopener" href="https://gitlab.com/pineoc/cordova-ci-demo/pipelines">https://gitlab.com/pineoc/cordova-ci-demo/pipelines</a></p><p>이제 커밋할 때마다 빌드가 돌아가고 빌드의 실패&#x2F;성공을 확인할 수 있습니다.<br>커밋에 <code>[ci skip]</code> 이라고 명시하면 빌드는 스킵됩니다.<br><img src="https://user-images.githubusercontent.com/5077086/60391408-7e365d80-9b28-11e9-8ea0-d36389f6cef1.png"><br>(중간에 빌드 환경이 달라져서 실패한 내용이 생겼네요.)</p><p>기본 프로젝트는 어렵지 않게 설정해보았지만<br>추가적인 플러그인 추가나 설정이 들어가면 어려워질 수 있을 것 같습니다.<br>iOS 빌드 시스템을 사용하려면 다른 것도 필요하겠구요.</p><p>기본적인 설정이라도 도움이 되었으면 좋겠습니다. :)</p><h2 id="참고-문서"><a href="#참고-문서" class="headerlink" title="참고 문서"></a>참고 문서</h2><ul><li>Medium: <a target="_blank" rel="noopener" href="https://medium.freecodecamp.org/how-to-setup-ci-on-gitlab-using-docker-66e1e04dcdc2">https://medium.freecodecamp.org/how-to-setup-ci-on-gitlab-using-docker-66e1e04dcdc2</a></li><li>GitLab CI quick start: <a target="_blank" rel="noopener" href="https://gitlab.com/help/ci/quick_start/README">https://gitlab.com/help/ci/quick_start/README</a></li><li>GitLab CI Demo: <a target="_blank" rel="noopener" href="https://gitlab.com/ykyuen/gitlab-ci-demo">https://gitlab.com/ykyuen/gitlab-ci-demo</a></li></ul></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2019-04-20T08:09:42.000Z" title="2019. 4. 20. 오후 5:09:42">2019-04-20</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2022-01-16T07:25:40.762Z" title="2022. 1. 16. 오후 4:25:40">2022-01-16</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/blog/categories/Tech/">Tech</a></span><span class="level-item">7분안에 읽기 (약 982 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/2019/04/20/fisheye-webhook-error/">fisheye webhook error (with node.js)</a></h1><div class="content"><h2 id="Fisheye-Webhook-에러-수정"><a href="#Fisheye-Webhook-에러-수정" class="headerlink" title="Fisheye Webhook 에러 수정"></a>Fisheye Webhook 에러 수정</h2><p>SVN, Git과 같은 버전관리 프로그램에 기록되는 커밋(리비전) 내역을 트래킹해주는<br><code>Fisheye</code>를 회사에서 사용 중에 Webhook 기능이 있어 사용하다 에러를 만나게 되어 해결 방법을 남겨봅니다.<br>저는 Node.js + Express로 웹훅을 받아 처리할 때 문제가 있었습니다.</p><p>Fisheye에 대한 자세한 내용은 추후 다른 포스트에서 남겨보겠습니다. :)</p><h2 id="Webhook-기본-설정"><a href="#Webhook-기본-설정" class="headerlink" title="Webhook 기본 설정"></a>Webhook 기본 설정</h2><p>Fisheye에서 웹훅을 설정하는 방법은 간단합니다.<br>아래 링크를 참고하여 웹훅을 설정합니다.<br><a target="_blank" rel="noopener" href="https://confluence.atlassian.com/fisheye/configuring-web-hooks-960155631.html">https://confluence.atlassian.com/fisheye/configuring-web-hooks-960155631.html</a></p><h2 id="Webhook을-받기-위한-Node-js-Express-서버-구성"><a href="#Webhook을-받기-위한-Node-js-Express-서버-구성" class="headerlink" title="Webhook을 받기 위한 Node.js + Express 서버 구성"></a>Webhook을 받기 위한 Node.js + Express 서버 구성</h2><p>간단한 서버 어플리케이션을 만들어서 웹훅을 받아봅니다.<br>POST 요청을 받을 수 있도록 만들고 Test 기능으로 웹훅을 보내 보았습니다.</p><p>그랬더니 아래와 같은 에러가 생겼습니다.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">POST &#x2F;test&#x2F;webhook 415 4.796 ms - 1426</span><br><span class="line">UnsupportedMediaTypeError: unsupported content encoding &quot;utf-8&quot;</span><br><span class="line">    at contentstream (C:\Users\pineoc\Desktop\private\pino-bot\node_modules\body-parser\lib\read.js:174:13)</span><br><span class="line">    at read (C:\Users\pineoc\Desktop\private\pino-bot\node_modules\body-parser\lib\read.js:54:14)</span><br><span class="line">    at jsonParser (C:\Users\pineoc\Desktop\private\pino-bot\node_modules\body-parser\lib\types\json.js:134:5)</span><br><span class="line">    at Layer.handle [as handle_request] (C:\Users\pineoc\Desktop\private\pino-bot\node_modules\express\lib\router\layer.js:95:5)</span><br><span class="line">    at trim_prefix (C:\Users\pineoc\Desktop\private\pino-bot\node_modules\express\lib\router\index.js:317:13)</span><br><span class="line">    at C:\Users\pineoc\Desktop\private\pino-bot\node_modules\express\lib\router\index.js:284:7</span><br><span class="line">    at Function.process_params (C:\Users\pineoc\Desktop\private\pino-bot\node_modules\express\lib\router\index.js:335:12)</span><br><span class="line">    at next (C:\Users\pineoc\Desktop\private\pino-bot\node_modules\express\lib\router\index.js:275:10)</span><br><span class="line">    at logger (C:\Users\pineoc\Desktop\private\pino-bot\node_modules\morgan\index.js:144:5)</span><br><span class="line">    at Layer.handle [as handle_request] (C:\Users\pineoc\Desktop\private\pino-bot\node_modules\express\lib\router\layer.js:95:5)</span><br></pre></td></tr></table></figure><p>이런 에러는 또 처음이라 좀 더 확인해보았습니다.<br>(제 코드 상에 문제라기 보다 웹훅에서 보내주는 데이터 쪽과 맞춰야하는 문제로 보였기 때문입니다.)</p><h2 id="UnsupportedMediaTypeError-에러-확인-및-해결-시도"><a href="#UnsupportedMediaTypeError-에러-확인-및-해결-시도" class="headerlink" title="UnsupportedMediaTypeError 에러 확인 및 해결 시도"></a><code>UnsupportedMediaTypeError</code> 에러 확인 및 해결 시도</h2><p>에러 내용은 저에게는 생소해서 구글에서 관련 에러를 검색해보았습니다.<br><code>UnsupportedMediaTypeError: unsupported content encoding &quot;utf-8&quot;</code>를 검색해보니<br>아래와 같은 글들이 나왔습니다.</p><ul><li>Content-Encoding issue: <a target="_blank" rel="noopener" href="https://github.com/expressjs/body-parser/issues/100">https://github.com/expressjs/body-parser/issues/100</a></li><li>unsupported content encoding “utf-8”: <a target="_blank" rel="noopener" href="https://github.com/Strider-CD/strider/issues/1021">https://github.com/Strider-CD/strider/issues/1021</a></li></ul><p>몇 가지 글을 보았을 때는 Body-parser 쪽에 문제가 있어서 안되는 것으로 예상하여 아래와 같이 해결해보려 했습니다만,<br>첫 번째 글을 보면 <code>Request Header 값 중 &quot;Content-Encoding: UTF-8&quot;를 빼면 해결되지 않을까?</code> 하는 질문이 있습니다.</p><p>바로 아래에는 헤더 값을 제거하는 코드가 답변으로 달렸죠.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// remove invalid header</span></span><br><span class="line">  <span class="keyword">delete</span> req.headers[<span class="string">&#x27;content-encoding&#x27;</span>];</span><br><span class="line">  next();</span><br><span class="line">&#125;);</span><br><span class="line">app.use(express.json());</span><br><span class="line">app.use(express.urlencoded(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;));</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure><p>이렇게 app.js 코드를 수정하고 웹훅 데이터를 받아보았더니 해결되었습니다.</p><h2 id="Content-Encoding-UTF-8"><a href="#Content-Encoding-UTF-8" class="headerlink" title="Content-Encoding: UTF-8?"></a><code>Content-Encoding: UTF-8</code>?</h2><p><code>Content-Encoding: UTF-8</code> 는 뭐길래 에러가 났을까 확인해보았습니다.<br>우선 <code>Content-Encoding</code>이라는 헤더는 <code>미디어 타입을 압축</code>하기 위해 사용되는 값입니다.<br>참고: <a target="_blank" rel="noopener" href="https://developer.mozilla.org/ko/docs/Web/HTTP/Headers/Content-Encoding">https://developer.mozilla.org/ko/docs/Web/HTTP/Headers/Content-Encoding</a></p><p>Content-Encoding은 주로 아래와 같이 사용되죠.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Content-Encoding: gzip</span><br><span class="line">Content-Encoding: compress</span><br><span class="line">Content-Encoding: deflate</span><br><span class="line">Content-Encoding: identity</span><br><span class="line">Content-Encoding: br</span><br></pre></td></tr></table></figure><p>위 사용 방법에 따르면 <code>UTF-8</code> 값은 유효하지 않은 값입니다. (Invalid)<br>UTF-8 인코딩 혹은 문자 인코딩을 요청에 표현하고 싶다면 아래와 같이 표현해야합니다.<br>참고: <a target="_blank" rel="noopener" href="https://www.w3.org/International/questions/qa-headers-charset.ko">https://www.w3.org/International/questions/qa-headers-charset.ko</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Content-Type: text&#x2F;html; charset&#x3D;utf-8</span><br></pre></td></tr></table></figure><h2 id="문제-해결"><a href="#문제-해결" class="headerlink" title="문제 해결"></a>문제 해결</h2><p>해결 방법은 그렇게 어렵지 않았지만 해결하면서 다양한 내용을 알게되어서 좋았습니다.<br>+문제 없이 웹훅도 사용할 수 있게되어서 더 좋았죠. :)</p><ul><li><code>Request Header</code> 유효성 문제</li><li><code>Content-Encoding</code> 헤더 값 사용 방법</li><li><code>Content-Type</code> 헤더 값 사용 방법</li></ul><p>다른 웹훅을 등록하거나, 웹훅 시스템을 만들 때 고려해야하는 내용이었습니다.</p></div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/blog/categories/Tech/page/6/">이전</a></div><div class="pagination-next is-invisible is-hidden-mobile"><a href="/blog/categories/Tech/page/8/">다음</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/blog/categories/Tech/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/blog/categories/Tech/page/6/">6</a></li><li><a class="pagination-link is-current" href="/blog/categories/Tech/page/7/">7</a></li></ul></nav></div><div class="column column-left is-3-tablet is-3-desktop is-3-widescreen order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://www.gravatar.com/avatar/36b2e11dada89a7d6bbb916157ab57ea?s=128" alt="Pineoc"></figure><p class="title is-size-4 is-block" style="line-height:inherit">Pineoc</p><p class="is-size-6 is-block">PM &amp; Developer</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">포스트</p><a href="/blog/archives"><p class="title">89</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">카테고리</p><a href="/blog/categories"><p class="title">14</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">태그</p><a href="/blog/tags"><p class="title">44</p></a></div></div></nav></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">카테고리</h3><ul class="menu-list"><li><a class="level is-mobile" href="/blog/categories/Blog/"><span class="level-start"><span class="level-item">Blog</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/blog/categories/Life/"><span class="level-start"><span class="level-item">Life</span></span><span class="level-end"><span class="level-item tag">12</span></span></a><ul><li><a class="level is-mobile" href="/blog/categories/Life/Book/"><span class="level-start"><span class="level-item">Book</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/blog/categories/Life/IoT/"><span class="level-start"><span class="level-item">IoT</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/blog/categories/Life/Study/"><span class="level-start"><span class="level-item">Study</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/blog/categories/Life/Think/"><span class="level-start"><span class="level-item">Think</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li><li><a class="level is-mobile" href="/blog/categories/PM/"><span class="level-start"><span class="level-item">PM</span></span><span class="level-end"><span class="level-item tag">43</span></span></a><ul><li><a class="level is-mobile" href="/blog/categories/PM/Framework/"><span class="level-start"><span class="level-item">Framework</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/blog/categories/PM/System/"><span class="level-start"><span class="level-item">System</span></span><span class="level-end"><span class="level-item tag">31</span></span></a></li><li><a class="level is-mobile" href="/blog/categories/PM/Work/"><span class="level-start"><span class="level-item">Work</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></li><li><a class="level is-mobile" href="/blog/categories/Tech/"><span class="level-start"><span class="level-item">Tech</span></span><span class="level-end"><span class="level-item tag">33</span></span></a><ul><li><a class="level is-mobile" href="/blog/categories/Tech/Game/"><span class="level-start"><span class="level-item">Game</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/blog/categories/Tech/Javascript/"><span class="level-start"><span class="level-item">Javascript</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/blog/categories/Tech/Program-Service/"><span class="level-start"><span class="level-item">Program&amp;Service</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li></ul></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">최근 글</h3><article class="media"><div class="media-content"><p class="date"><time datetime="2023-07-23T14:30:17.000Z">2023-07-23</time></p><p class="title"><a href="/blog/2023/07/23/think-ndc19-review/">NDC 발표 리뷰: NDC2019 5년차 모바일 게임 생존기</a></p><p class="categories"><a href="/blog/categories/Life/">Life</a> / <a href="/blog/categories/Life/Study/">Study</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2023-07-16T06:30:17.000Z">2023-07-16</time></p><p class="title"><a href="/blog/2023/07/16/unreal-crash-analytics-services/">Unreal Engine 크래시 분석 서비스 조사</a></p><p class="categories"><a href="/blog/categories/Tech/">Tech</a> / <a href="/blog/categories/Tech/Game/">Game</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2023-07-10T14:30:17.000Z">2023-07-10</time></p><p class="title"><a href="/blog/2023/07/10/bugsplat-UnealEngine-427-integration/">BugSplat - Uneal Engine 4.27 integration</a></p><p class="categories"><a href="/blog/categories/Tech/">Tech</a> / <a href="/blog/categories/Tech/Game/">Game</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2023-06-25T02:30:17.000Z">2023-06-25</time></p><p class="title"><a href="/blog/2023/06/25/Sentry-UnealEngine-427-integration/">Sentry - Uneal Engine 4.27 integration</a></p><p class="categories"><a href="/blog/categories/Tech/">Tech</a> / <a href="/blog/categories/Tech/Game/">Game</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2023-06-06T04:00:00.000Z">2023-06-06</time></p><p class="title"><a href="/blog/2023/06/06/What-is-inputlag/">인풋랙(Input Lag)? 그게 뭔데?</a></p><p class="categories"><a href="/blog/categories/Tech/">Tech</a> / <a href="/blog/categories/Tech/Game/">Game</a></p></div></article></div></div><div class="card widget" data-type="adsense"><div class="card-content"><div class="menu"><h3 class="menu-label">광고</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-8535740075617154" data-ad-slot="8690513316" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/blog/"><img src="/blog/img/logo.svg" alt="Pineoc&#039;s Blog" height="28"></a><p class="is-size-7"><span>&copy; 2023 Pineoc</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("ko")</script><script>var IcarusThemeSettings={article:{highlight:{clipboard:!0,fold:"unfolded"}}}</script><script src="/blog/js/column.js"></script><script src="/blog/js/animation.js"></script><a id="back-to-top" title="맨 위로" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/blog/js/back_to_top.js" defer></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load",()=>{"function"==typeof $.fn.lightGallery&&$(".article").lightGallery({selector:".gallery-item"}),"function"==typeof $.fn.justifiedGallery&&($(".justified-gallery > p > .gallery-item").length&&$(".justified-gallery > p > .gallery-item").unwrap(),$(".justified-gallery").justifiedGallery())})</script><script src="/blog/js/main.js" defer></script><style>.searchbox .searchbox-body{background:#fff}</style><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="입력 하세요..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"><gcse:searchresults-only></gcse:searchresults-only></div></div><script>!function(){var e=document.createElement("script"),t=(e.type="text/javascript",e.async=!0,e.src="https://cse.google.com/cse.js?cx=4c5e31efb3c79fae6",document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)}()</script></div><script src="/blog/js/google_cse.js"></script></body></html>